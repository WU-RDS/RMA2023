<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data handling | Retail Marketing Analytics 2023</title>
  <meta name="description" content="An Introduction to Data Analytics Using R" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data handling | Retail Marketing Analytics 2023" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An Introduction to Data Analytics Using R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data handling | Retail Marketing Analytics 2023" />
  
  <meta name="twitter:description" content="An Introduction to Data Analytics Using R" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="getting-started-with-r.html"/>
<link rel="next" href="summarizing-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">RMA 2023</a></strong></li>

<li class="divider"></li>
<li class="part"><span><b>I Course outline</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#course-structure"><i class="fa fa-check"></i>Course structure</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#grading"><i class="fa fa-check"></i>Grading</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#course-materials"><i class="fa fa-check"></i>Course materials</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#main-reference"><i class="fa fa-check"></i>Main reference</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#further-readings"><i class="fa fa-check"></i>Further readings</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#discussion-forum"><i class="fa fa-check"></i>Discussion forum</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#other-web-resources"><i class="fa fa-check"></i>Other web-resources</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#contact"><i class="fa fa-check"></i>Contact</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Lecture notes</b></span></li>
<li class="chapter" data-level="1" data-path="preliminaries.html"><a href="preliminaries.html"><i class="fa fa-check"></i><b>1</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="1.1" data-path="preliminaries.html"><a href="preliminaries.html#marketing-foundations-recap"><i class="fa fa-check"></i><b>1.1</b> Marketing foundations (recap)</a></li>
<li class="chapter" data-level="1.2" data-path="preliminaries.html"><a href="preliminaries.html#the-research-process"><i class="fa fa-check"></i><b>1.2</b> The research process</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="preliminaries.html"><a href="preliminaries.html#research-question-and-hypothesis"><i class="fa fa-check"></i><b>1.2.1</b> Research question and hypothesis</a></li>
<li class="chapter" data-level="1.2.2" data-path="preliminaries.html"><a href="preliminaries.html#choosing-a-research-design"><i class="fa fa-check"></i><b>1.2.2</b> Choosing a research design</a></li>
<li class="chapter" data-level="1.2.3" data-path="preliminaries.html"><a href="preliminaries.html#collecting-data"><i class="fa fa-check"></i><b>1.2.3</b> Collecting data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#learning-check"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#how-to-download-and-install-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> How to download and install R and RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#the-r-studio-interface"><i class="fa fa-check"></i><b>2.2</b> The R Studio interface</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#functions"><i class="fa fa-check"></i><b>2.3</b> Functions</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#packages"><i class="fa fa-check"></i><b>2.4</b> Packages</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#a-typical-r-session"><i class="fa fa-check"></i><b>2.5</b> A typical R session</a></li>
<li class="chapter" data-level="2.6" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#getting-help"><i class="fa fa-check"></i><b>2.6</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-handling.html"><a href="data-handling.html"><i class="fa fa-check"></i><b>3</b> Data handling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-handling.html"><a href="data-handling.html#basic-data-handling"><i class="fa fa-check"></i><b>3.1</b> Basic data handling</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-handling.html"><a href="data-handling.html#creating-objects"><i class="fa fa-check"></i><b>3.1.1</b> Creating objects</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-handling.html"><a href="data-handling.html#data-types"><i class="fa fa-check"></i><b>3.1.2</b> Data types</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-handling.html"><a href="data-handling.html#data-structures"><i class="fa fa-check"></i><b>3.1.3</b> Data structures</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-handling.html"><a href="data-handling.html#data-import-and-export"><i class="fa fa-check"></i><b>3.2</b> Data import and export</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-handling.html"><a href="data-handling.html#getting-data-for-this-course"><i class="fa fa-check"></i><b>3.2.1</b> Getting data for this course</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-handling.html"><a href="data-handling.html#import-data-created-by-other-software-packages"><i class="fa fa-check"></i><b>3.2.2</b> Import data created by other software packages</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-handling.html"><a href="data-handling.html#import-data-from-qualtrics"><i class="fa fa-check"></i><b>3.2.3</b> Import data from Qualtrics</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-handling.html"><a href="data-handling.html#export-data"><i class="fa fa-check"></i><b>3.2.4</b> Export data</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-handling.html"><a href="data-handling.html#import-data-from-the-web"><i class="fa fa-check"></i><b>3.2.5</b> Import data from the Web</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-handling.html"><a href="data-handling.html#learning-check-1"><i class="fa fa-check"></i>Learning check</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="summarizing-data.html"><a href="summarizing-data.html"><i class="fa fa-check"></i><b>4</b> Summarizing data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="summarizing-data.html"><a href="summarizing-data.html#summary-statistics"><i class="fa fa-check"></i><b>4.1</b> Summary statistics</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="summarizing-data.html"><a href="summarizing-data.html#categorical-variables"><i class="fa fa-check"></i><b>4.1.1</b> Categorical variables</a></li>
<li class="chapter" data-level="4.1.2" data-path="summarizing-data.html"><a href="summarizing-data.html#continuous-variables"><i class="fa fa-check"></i><b>4.1.2</b> Continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="summarizing-data.html"><a href="summarizing-data.html#data-visualization"><i class="fa fa-check"></i><b>4.2</b> Data visualization</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="summarizing-data.html"><a href="summarizing-data.html#categorical-variables-1"><i class="fa fa-check"></i><b>4.2.1</b> Categorical variables</a></li>
<li class="chapter" data-level="4.2.2" data-path="summarizing-data.html"><a href="summarizing-data.html#continuous-variables-1"><i class="fa fa-check"></i><b>4.2.2</b> Continuous variables</a></li>
<li class="chapter" data-level="4.2.3" data-path="summarizing-data.html"><a href="summarizing-data.html#saving-plots"><i class="fa fa-check"></i><b>4.2.3</b> Saving plots</a></li>
<li class="chapter" data-level="4.2.4" data-path="summarizing-data.html"><a href="summarizing-data.html#ggplot-extensions"><i class="fa fa-check"></i><b>4.2.4</b> ggplot extensions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summarizing-data.html"><a href="summarizing-data.html#learning-check-2"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="summarizing-data.html"><a href="summarizing-data.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>5</b> Statistical inference</a>
<ul>
<li class="chapter" data-level="5.1" data-path="statistical-inference.html"><a href="statistical-inference.html#if-we-knew-it-all"><i class="fa fa-check"></i><b>5.1</b> If we knew it all</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="statistical-inference.html"><a href="statistical-inference.html#sampling-from-a-known-population"><i class="fa fa-check"></i><b>5.1.1</b> Sampling from a known population</a></li>
<li class="chapter" data-level="5.1.2" data-path="statistical-inference.html"><a href="statistical-inference.html#standard-error-of-the-mean"><i class="fa fa-check"></i><b>5.1.2</b> Standard error of the mean</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="statistical-inference.html"><a href="statistical-inference.html#the-central-limit-theorem"><i class="fa fa-check"></i><b>5.2</b> The Central Limit Theorem</a></li>
<li class="chapter" data-level="5.3" data-path="statistical-inference.html"><a href="statistical-inference.html#using-what-we-actually-know"><i class="fa fa-check"></i><b>5.3</b> Using what we actually know</a></li>
<li class="chapter" data-level="5.4" data-path="statistical-inference.html"><a href="statistical-inference.html#confidence-intervals-for-the-sample-mean"><i class="fa fa-check"></i><b>5.4</b> Confidence Intervals for the Sample Mean</a></li>
<li class="chapter" data-level="" data-path="statistical-inference.html"><a href="statistical-inference.html#learning-check-3"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="statistical-inference.html"><a href="statistical-inference.html#references-2"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="supervised-learning.html"><a href="supervised-learning.html"><i class="fa fa-check"></i><b>6</b> Supervised learning</a>
<ul>
<li class="chapter" data-level="6.1" data-path="supervised-learning.html"><a href="supervised-learning.html#linear-regression"><i class="fa fa-check"></i><b>6.1</b> Linear regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="supervised-learning.html"><a href="supervised-learning.html#correlation"><i class="fa fa-check"></i><b>6.1.1</b> Correlation</a></li>
<li class="chapter" data-level="6.1.2" data-path="supervised-learning.html"><a href="supervised-learning.html#regression-analysis"><i class="fa fa-check"></i><b>6.1.2</b> Regression analysis</a></li>
<li class="chapter" data-level="6.1.3" data-path="supervised-learning.html"><a href="supervised-learning.html#categorical-predictors"><i class="fa fa-check"></i><b>6.1.3</b> Categorical predictors</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="supervised-learning.html"><a href="supervised-learning.html#logistic-regression"><i class="fa fa-check"></i><b>6.2</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="supervised-learning.html"><a href="supervised-learning.html#motivation-and-intuition"><i class="fa fa-check"></i><b>6.2.1</b> Motivation and intuition</a></li>
<li class="chapter" data-level="6.2.2" data-path="supervised-learning.html"><a href="supervised-learning.html#technical-details-of-the-model"><i class="fa fa-check"></i><b>6.2.2</b> Technical details of the model</a></li>
<li class="chapter" data-level="6.2.3" data-path="supervised-learning.html"><a href="supervised-learning.html#estimation-in-r"><i class="fa fa-check"></i><b>6.2.3</b> Estimation in R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="supervised-learning.html"><a href="supervised-learning.html#learning-check-4"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="supervised-learning.html"><a href="supervised-learning.html#references-3"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>7</b> Unsupervised learning</a>
<ul>
<li class="chapter" data-level="7.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#principal-component-analysis"><i class="fa fa-check"></i><b>7.1</b> Principal component analysis</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#introduction-1"><i class="fa fa-check"></i><b>7.1.1</b> Introduction</a></li>
<li class="chapter" data-level="7.1.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#steps-in-factor-analysis"><i class="fa fa-check"></i><b>7.1.2</b> Steps in factor analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#cluster-analysis"><i class="fa fa-check"></i><b>7.2</b> Cluster analysis</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means"><i class="fa fa-check"></i><b>7.2.1</b> K-Means</a></li>
<li class="chapter" data-level="7.2.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>7.2.2</b> Hierarchical Clustering</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#learning-check-5"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#references-4"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="part"><span><b>III Assignments</b></span></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R Markdown</a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#introduction-to-r-markdown"><i class="fa fa-check"></i><b>8.1</b> Introduction to R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#creating-a-new-r-markdown-document"><i class="fa fa-check"></i>Creating a new R Markdown document</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#text-and-equations"><i class="fa fa-check"></i>Text and Equations</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#r-code"><i class="fa fa-check"></i>R-Code</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#latex-math"><i class="fa fa-check"></i>LaTeX Math</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="assignment-solutions.html"><a href="assignment-solutions.html"><i class="fa fa-check"></i><b>9</b> Assignment solutions</a>
<ul>
<li class="chapter" data-level="9.1" data-path="assignment-solutions.html"><a href="assignment-solutions.html#assignment-1"><i class="fa fa-check"></i><b>9.1</b> Assignment 1</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q1"><i class="fa fa-check"></i><b>9.1.1</b> Q1</a></li>
<li class="chapter" data-level="9.1.2" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q2"><i class="fa fa-check"></i><b>9.1.2</b> Q2</a></li>
<li class="chapter" data-level="9.1.3" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q3"><i class="fa fa-check"></i><b>9.1.3</b> Q3</a></li>
<li class="chapter" data-level="9.1.4" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q4"><i class="fa fa-check"></i><b>9.1.4</b> Q4</a></li>
<li class="chapter" data-level="9.1.5" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q5"><i class="fa fa-check"></i><b>9.1.5</b> Q5</a></li>
<li class="chapter" data-level="9.1.6" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q6"><i class="fa fa-check"></i><b>9.1.6</b> Q6</a></li>
<li class="chapter" data-level="9.1.7" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q7"><i class="fa fa-check"></i><b>9.1.7</b> Q7</a></li>
<li class="chapter" data-level="9.1.8" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q8"><i class="fa fa-check"></i><b>9.1.8</b> Q8</a></li>
<li class="chapter" data-level="9.1.9" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q9"><i class="fa fa-check"></i><b>9.1.9</b> Q9</a></li>
<li class="chapter" data-level="9.1.10" data-path="assignment-solutions.html"><a href="assignment-solutions.html#q10"><i class="fa fa-check"></i><b>9.1.10</b> Q10</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="group-project-1.html"><a href="group-project-1.html"><i class="fa fa-check"></i><b>10</b> Group project</a>
<ul>
<li class="chapter" data-level="10.1" data-path="group-project-1.html"><a href="group-project-1.html#data-analysis"><i class="fa fa-check"></i><b>10.1</b> Data analysis</a></li>
<li class="chapter" data-level="10.2" data-path="group-project-1.html"><a href="group-project-1.html#load-data"><i class="fa fa-check"></i><b>10.2</b> Load data</a></li>
<li class="chapter" data-level="10.3" data-path="group-project-1.html"><a href="group-project-1.html#question-1"><i class="fa fa-check"></i><b>10.3</b> Question 1</a></li>
<li class="chapter" data-level="10.4" data-path="group-project-1.html"><a href="group-project-1.html#question-2"><i class="fa fa-check"></i><b>10.4</b> Question 2</a></li>
<li class="chapter" data-level="10.5" data-path="group-project-1.html"><a href="group-project-1.html#question-3"><i class="fa fa-check"></i><b>10.5</b> Question 3</a></li>
<li class="chapter" data-level="10.6" data-path="group-project-1.html"><a href="group-project-1.html#question-4"><i class="fa fa-check"></i><b>10.6</b> Question 4</a></li>
</ul></li>
<li class="part"><span><b>IV FAQ</b></span></li>
<li class="chapter" data-level="11" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>11</b> FAQ</a>
<ul>
<li class="chapter" data-level="11.1" data-path="faq.html"><a href="faq.html#common-error-messages"><i class="fa fa-check"></i><b>11.1</b> Common error messages</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#a-general-note-on-error-messages"><i class="fa fa-check"></i>A general note on error messages</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-in-filefile-rt-cannot-open-the-connection"><i class="fa fa-check"></i>Error in file(file, “rt”): cannot open the connection</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-unexpected-symbol-in-call"><i class="fa fa-check"></i>Error: unexpected ‘SYMBOL’ in “CALL”</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-in-call-object-of-type-closure-is-not-subsettable"><i class="fa fa-check"></i>Error in CALL : object of type ‘closure’ is not subsettable</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-in-call_with_-operator-is-invalid-for-atomic-vectors"><i class="fa fa-check"></i>Error in CALL_WITH_$: $ operator is invalid for atomic vectors</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-in-call-object-name-not-found"><i class="fa fa-check"></i>Error in CALL: object ‘NAME’ not found</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-in-call-could-not-find-function-function"><i class="fa fa-check"></i>Error in CALL: could not find function “FUNCTION”</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#error-in-call-incorrect-number-of-dimension"><i class="fa fa-check"></i>Error in CALL: incorrect number of dimension</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="faq.html"><a href="faq.html#installation-of-r-packages"><i class="fa fa-check"></i><b>11.2</b> Installation of R packages</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#what-are-the-different-ways-to-install-r-packages"><i class="fa fa-check"></i>What are the different ways to install R packages?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#i-cannot-install-packages-due-to-error-in-contrib.urlrepossource-or-warning-message-package-packagename-is-not-available-for-this-version-of-r"><i class="fa fa-check"></i>I cannot install packages due to “Error in contrib.url(repos,”source”)” or “Warning message: package ‘PACKAGENAME’ is not available for this version of R”</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#some-libraries-with-graphical-output-e.g.-summarytools-magick-fail-to-installload-properly-on-macos"><i class="fa fa-check"></i>Some libraries with graphical output (e.g., summarytools, magick) fail to install/load properly on MacOS</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#i-cannot-install-some-packages-on-macos"><i class="fa fa-check"></i>I cannot install some packages on MacOS</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="faq.html"><a href="faq.html#issues-with-statistics-and-data"><i class="fa fa-check"></i><b>11.3</b> Issues with statistics and data</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#why-does-a-multi-item-scale-lead-to-increased-reliability"><i class="fa fa-check"></i>Why does a multi-item scale lead to increased reliability?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#why-can-demeaningstandardization-lead-to-missing-values"><i class="fa fa-check"></i>Why can demeaning/standardization lead to missing values?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#the-confidence-interval-ci-of-the-mean-seems-very-small-compared-to-the-dispersion-of-my-sample.-can-this-be-correct"><i class="fa fa-check"></i>The confidence interval (CI) of the mean seems very small compared to the dispersion of my sample. Can this be correct?</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="faq.html"><a href="faq.html#errors-related-to-specific-methods"><i class="fa fa-check"></i><b>11.4</b> Errors related to specific methods</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#logistic-regression-1"><i class="fa fa-check"></i>Logistic regression</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#when-using-logistic-regression-error-in-weights-y-non-numeric-argument-to-binary-operator"><i class="fa fa-check"></i>When using logistic regression: Error in weights * y : non-numeric argument to binary operator</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="faq.html"><a href="faq.html#general-settings-and-options"><i class="fa fa-check"></i><b>11.5</b> General settings and options</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#numbers-are-formatted-weirdly"><i class="fa fa-check"></i>Numbers are formatted weirdly</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="faq.html"><a href="faq.html#data-visualizationoutput-issues"><i class="fa fa-check"></i><b>11.6</b> Data visualization/output issues</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#how-can-the-geom-colors-in-a-ggplot-be-changed"><i class="fa fa-check"></i>How can the <code>geom</code> colors in a <code>ggplot</code> be changed?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#why-are-some-histograms-displayed-differently"><i class="fa fa-check"></i>Why are some histograms displayed differently?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#some-labels-in-plots-are-cut-off.-how-can-i-extend-the-plot-margins"><i class="fa fa-check"></i>Some labels in plots are cut off. How can I extend the plot margins?</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="faq.html"><a href="faq.html#issues-with-functions-and-function-arguments"><i class="fa fa-check"></i><b>11.7</b> Issues with functions and function arguments</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#problems-with-factor-and-as.factor"><i class="fa fa-check"></i>Problems with <code>factor</code> and <code>as.factor</code></a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#how-can-i-find-an-explanation-of-the-output-of-a-function"><i class="fa fa-check"></i>How can I find an explanation of the output of a function?</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#what-does-the-margin-argument-do"><i class="fa fa-check"></i>What does the <code>MARGIN</code> argument do?</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="faq.html"><a href="faq.html#issues-with-r-markdown"><i class="fa fa-check"></i><b>11.8</b> Issues with R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#i-get-an-error-when-knitting-to-pdf-but-it-works-for-html"><i class="fa fa-check"></i>I get an error when <code>knit</code>ting to PDF but it works for HTML</a></li>
<li class="chapter" data-level="" data-path="faq.html"><a href="faq.html#i-am-not-sure-where-r-code-latex-math-and-text-go"><i class="fa fa-check"></i>I am not sure where R-code, LaTeX math, and text go</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="faq.html"><a href="faq.html#new-questions"><i class="fa fa-check"></i><b>11.9</b> New questions</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Retail Marketing Analytics 2023</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-handling" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Data handling<a href="data-handling.html#data-handling" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter covers the basics of data handling in R.</p>
<div id="basic-data-handling" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Basic data handling<a href="data-handling.html#basic-data-handling" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="infobox download">
<p><a href="./Code/01-basic_data_handling.R">You can download the corresponding R-Code here</a></p>
</div>
<br>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/-Ib9xY7pcAw" frameborder="0" allowfullscreen>
</iframe>
</div>
<p><br></p>
<div id="creating-objects" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Creating objects<a href="data-handling.html#creating-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Anything created in R is an object. You can assign values to objects using the assignment operator <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-handling.html#cb19-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">&quot;hello world&quot;</span> <span class="co">#assigns the words &quot;hello world&quot; to the object x</span></span>
<span id="cb19-2"><a href="data-handling.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#this is a comment</span></span></code></pre></div>
<p>Note that comments may be included in the code after a <code>#</code>. The text after <code>#</code> is not evaluated when the code is run; they can be written directly after the code or in a separate line.</p>
<p>To see the value of an object, simply type its name into the console and hit enter:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-handling.html#cb20-1" aria-hidden="true" tabindex="-1"></a>x <span class="co">#print the value of x to the console</span></span></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>You can also explicitly tell R to print the value of an object:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-handling.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x) <span class="co">#print the value of x to the console</span></span></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>Note that because we assign characters in this case (as opposed to e.g., numeric values), we need to wrap the words in quotation marks, which must always come in pairs. Although RStudio automatically adds a pair of quotation marks (i.e., opening and closing marks) when you enter the opening marks it could be that you end up with a mismatch by accident (e.g., <code>x &lt;- "hello</code>). In this case, R will show you the continuation character “+”. The same could happen if you did not execute the full command by accident. The “+” means that R is expecting more input. If this happens, either add the missing pair, or press ESCAPE to abort the expression and try again.</p>
<p>To change the value of an object, you can simply overwrite the previous value. For example, you could also assign a numeric value to “x” to perform some basic operations:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-handling.html#cb24-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="co">#assigns the value of 2 to the object x</span></span>
<span id="cb24-2"><a href="data-handling.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-handling.html#cb26-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="dv">2</span>  <span class="co">#checks whether the value of x is equal to 2</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-handling.html#cb28-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">!=</span> <span class="dv">3</span>  <span class="co">#checks whether the value of x is NOT equal to 3</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-handling.html#cb30-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">3</span>   <span class="co">#checks whether the value of x is less than 3</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-handling.html#cb32-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">3</span>   <span class="co">#checks whether the value of x is greater than 3</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Note that the name of the object is completely arbitrary. We could also define a second object “y”, assign it a different value and use it to perform some basic mathematical operations:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-handling.html#cb34-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="co">#assigns the value of 2 to the object x</span></span>
<span id="cb34-2"><a href="data-handling.html#cb34-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> y <span class="co">#checks whether the value of x to the value of y</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-handling.html#cb36-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">*</span>y <span class="co">#multiplication of x and y</span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-handling.html#cb38-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y <span class="co">#adds the values of x and y together</span></span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-handling.html#cb40-1" aria-hidden="true" tabindex="-1"></a>y<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>x <span class="co">#adds the value of y squared and 3x the value of x together</span></span></code></pre></div>
<pre><code>## [1] 31</code></pre>
<p><b>Object names</b></p>
<p>Please note that object names must start with a letter and can only contain letters, numbers, as well as the <code>.</code>, and <code>_</code> separators. It is important to give your objects descriptive names and to be as consistent as possible with the naming structure. In this tutorial we will be using lower case words separated by underscores (e.g., <code>object_name</code>). There are other naming conventions, such as using a <code>.</code> as a separator (e.g., <code>object.name</code>), or using upper case letters (<code>objectName</code>). It doesn’t really matter which one you choose, as long as you are consistent.</p>
</div>
<div id="data-types" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Data types<a href="data-handling.html#data-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The most important types of data are:</p>
<table>
<colgroup>
<col width="14%" />
<col width="85%" />
</colgroup>
<thead>
<tr class="header">
<th>Data type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Numeric</td>
<td>Approximations of the real numbers, <span class="math inline">\(\normalsize\mathbb{R}\)</span> (e.g., mileage a car gets: 23.6, 20.9, etc.)</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Whole numbers, <span class="math inline">\(\normalsize\mathbb{Z}\)</span> (e.g., number of sales: 7, 0, 120, 63, etc.)</td>
</tr>
<tr class="odd">
<td>Character</td>
<td>Text data (strings, e.g., product names)</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>Categorical data for classification (e.g., product groups)</td>
</tr>
<tr class="odd">
<td>Logical</td>
<td>TRUE, FALSE</td>
</tr>
<tr class="even">
<td>Date</td>
<td>Date variables (e.g., sales dates: 21-06-2015, 06-21-15, 21-Jun-2015, etc.)</td>
</tr>
</tbody>
</table>
<p>Variables can be converted from one type to another using the appropriate functions (e.g., <code>as.numeric()</code>,<code>as.integer()</code>,<code>as.character()</code>, <code>as.factor()</code>,<code>as.logical()</code>, <code>as.Date()</code>). For example, we could convert the object <code>y</code> to character as follows:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-handling.html#cb42-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.character</span>(y)</span>
<span id="cb42-2"><a href="data-handling.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;5&quot;</code></pre>
<p>Notice how the value is in quotation marks since it is now of type character.</p>
<p>Entering a vector of data into R can be done with the <code>c(x1,x2,..,x_n)</code> (“concatenate”) command. In order to be able to use our vector (or any other variable) later on we want to assign it a name using the assignment operator <code>&lt;-</code>. You can choose names arbitrarily (but the first character of a name cannot be a number). Just make sure they are descriptive and unique. Assigning the same name to two variables (e.g. vectors) will result in deletion of the first. Instead of converting a variable we can also create a new one and use an existing one as input. In this case we omit the <code>as.</code> and simply use the name of the type (e.g. <code>factor()</code>). There is a subtle difference between the two: When converting a variable, with e.g. <code>as.factor()</code>, we can only pass the variable we want to convert without additional arguments and R determines the factor levels by the existing unique values in the variable or just returns the variable itself if it is a factor already. When we specifically create a variable (just <code>factor()</code>, <code>matrix()</code>, etc.), we can and should set the options of this type explicitly. For a factor variable these could be the labels and levels, for a matrix the number of rows and columns and so on.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-handling.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Numeric:</span></span>
<span id="cb44-2"><a href="data-handling.html#cb44-2" aria-hidden="true" tabindex="-1"></a>top10_track_streams <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">163608</span>, <span class="dv">126687</span>, <span class="dv">120480</span>, <span class="dv">110022</span>, <span class="dv">108630</span>, <span class="dv">95639</span>, <span class="dv">94690</span>, <span class="dv">89011</span>, <span class="dv">87869</span>, <span class="dv">85599</span>) </span>
<span id="cb44-3"><a href="data-handling.html#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="data-handling.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Character:</span></span>
<span id="cb44-5"><a href="data-handling.html#cb44-5" aria-hidden="true" tabindex="-1"></a>top10_artist_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Axwell /</span><span class="sc">\\</span><span class="st"> Ingrosso&quot;</span>, <span class="st">&quot;Imagine Dragons&quot;</span>, <span class="st">&quot;J. Balvin&quot;</span>, <span class="st">&quot;Robin Schulz&quot;</span>, <span class="st">&quot;Jonas Blue&quot;</span>, <span class="st">&quot;David Guetta&quot;</span>, <span class="st">&quot;French Montana&quot;</span>, <span class="st">&quot;Calvin Harris&quot;</span>, <span class="st">&quot;Liam Payne&quot;</span>, <span class="st">&quot;Lauv&quot;</span>) <span class="co"># Characters have to be put in &quot;&quot;</span></span>
<span id="cb44-6"><a href="data-handling.html#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="data-handling.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Factor variable with two categories:</span></span>
<span id="cb44-8"><a href="data-handling.html#cb44-8" aria-hidden="true" tabindex="-1"></a>top10_track_explicit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>)</span>
<span id="cb44-9"><a href="data-handling.html#cb44-9" aria-hidden="true" tabindex="-1"></a>top10_track_explicit <span class="ot">&lt;-</span> <span class="fu">factor</span>(top10_track_explicit, </span>
<span id="cb44-10"><a href="data-handling.html#cb44-10" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, </span>
<span id="cb44-11"><a href="data-handling.html#cb44-11" aria-hidden="true" tabindex="-1"></a>                               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;not explicit&quot;</span>, <span class="st">&quot;explicit&quot;</span>))</span>
<span id="cb44-12"><a href="data-handling.html#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="data-handling.html#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Factor variable with more than two categories:</span></span>
<span id="cb44-14"><a href="data-handling.html#cb44-14" aria-hidden="true" tabindex="-1"></a>top10_artist_genre <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Dance&quot;</span>,<span class="st">&quot;Alternative&quot;</span>,<span class="st">&quot;Latino&quot;</span>,<span class="st">&quot;Dance&quot;</span>,<span class="st">&quot;Dance&quot;</span>,<span class="st">&quot;Dance&quot;</span>,<span class="st">&quot;Hip-Hop/Rap&quot;</span>,<span class="st">&quot;Dance&quot;</span>,<span class="st">&quot;Pop&quot;</span>,<span class="st">&quot;Pop&quot;</span>)</span>
<span id="cb44-15"><a href="data-handling.html#cb44-15" aria-hidden="true" tabindex="-1"></a>top10_artist_genre <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(top10_artist_genre)</span>
<span id="cb44-16"><a href="data-handling.html#cb44-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-17"><a href="data-handling.html#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co">#Date:</span></span>
<span id="cb44-18"><a href="data-handling.html#cb44-18" aria-hidden="true" tabindex="-1"></a>top_10_track_release_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2017-05-24&quot;</span>, <span class="st">&quot;2017-06-23&quot;</span>, <span class="st">&quot;2017-07-03&quot;</span>, <span class="st">&quot;2017-06-30&quot;</span>, <span class="st">&quot;2017-05-05&quot;</span>, <span class="st">&quot;2017-06-09&quot;</span>, <span class="st">&quot;2017-07-14&quot;</span>, <span class="st">&quot;2017-06-16&quot;</span>, <span class="st">&quot;2017-05-18&quot;</span>, <span class="st">&quot;2017-05-19&quot;</span>))</span>
<span id="cb44-19"><a href="data-handling.html#cb44-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-20"><a href="data-handling.html#cb44-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Logical</span></span>
<span id="cb44-21"><a href="data-handling.html#cb44-21" aria-hidden="true" tabindex="-1"></a>top10_track_explicit_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>)  </span></code></pre></div>
<p>In order to “return” a vector we can now simply enter its name:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-handling.html#cb45-1" aria-hidden="true" tabindex="-1"></a>top10_track_streams</span></code></pre></div>
<pre><code>##  [1] 163608 126687 120480 110022 108630  95639  94690  89011  87869  85599</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-handling.html#cb47-1" aria-hidden="true" tabindex="-1"></a>top_10_track_release_date</span></code></pre></div>
<pre><code>##  [1] &quot;2017-05-24&quot; &quot;2017-06-23&quot; &quot;2017-07-03&quot; &quot;2017-06-30&quot; &quot;2017-05-05&quot;
##  [6] &quot;2017-06-09&quot; &quot;2017-07-14&quot; &quot;2017-06-16&quot; &quot;2017-05-18&quot; &quot;2017-05-19&quot;</code></pre>
<p>In order to check the type of a variable the <code>class()</code> function is used.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-handling.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(top_10_track_release_date)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
</div>
<div id="data-structures" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Data structures<a href="data-handling.html#data-structures" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now let’s create a table that contains the variables in columns and each observation in a row (like in SPSS or Excel). There are different data structures in R (e.g., Matrix, Vector, List, Array). In this course, we will mainly use <b>data frames</b>.</p>
<p style="text-align:center;">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/dataframe.JPG" alt="data types" height="320">
</p>
<p>Data frames are similar to matrices but are more flexible in the sense that they may contain different data types (e.g., numeric, character, etc.), where all values of vectors and matrices have to be of the same type (e.g. character). It is often more convenient to use characters instead of numbers (e.g. when indicating a persons sex: “F”, “M” instead of 1 for female , 2 for male). Thus we would like to combine both numeric and character values while retaining the respective desired features. This is where “data frames” come into play. Data frames can have different types of data in each column. For example, we can combine the vectors created above in one data frame using <code>data.frame()</code>. This creates a separate column for each vector, which is usually what we want (similar to SPSS or Excel).</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-handling.html#cb51-1" aria-hidden="true" tabindex="-1"></a>music_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(top10_track_streams, </span>
<span id="cb51-2"><a href="data-handling.html#cb51-2" aria-hidden="true" tabindex="-1"></a>                         top10_artist_names, </span>
<span id="cb51-3"><a href="data-handling.html#cb51-3" aria-hidden="true" tabindex="-1"></a>                         top10_track_explicit, </span>
<span id="cb51-4"><a href="data-handling.html#cb51-4" aria-hidden="true" tabindex="-1"></a>                         top10_artist_genre, </span>
<span id="cb51-5"><a href="data-handling.html#cb51-5" aria-hidden="true" tabindex="-1"></a>                         top_10_track_release_date, </span>
<span id="cb51-6"><a href="data-handling.html#cb51-6" aria-hidden="true" tabindex="-1"></a>                         top10_track_explicit_1)</span></code></pre></div>
<div id="accessing-data-in-data-frames" class="section level4 hasAnchor" number="3.1.3.1">
<h4><span class="header-section-number">3.1.3.1</span> Accessing data in data frames<a href="data-handling.html#accessing-data-in-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When entering the name of a data frame, R returns the entire data frame:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-handling.html#cb52-1" aria-hidden="true" tabindex="-1"></a>music_data <span class="co"># Returns the entire data frame</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Hint: You may also use the <code>View()</code>-function to view the data in a table format (like in SPSS or Excel), i.e. enter the command <code>View(data)</code>. Note that you can achieve the same by clicking on the small table icon next to the data frame in the “Environment”-window on the right in RStudio.</p>
<p>Sometimes it is convenient to return only specific values instead of the entire data frame. There are a variety of ways to identify the elements of a data frame. One easy way is to explicitly state, which rows and columns you wish to view. The general form of the command is <code>data.frame[rows,columns]</code>. By leaving one of the arguments of <code>data.frame[rows,columns]</code> blank (e.g., <code>data.frame[rows,]</code>) we tell R that we want to access either all rows or columns, respectively. Note that <code>a:b</code> (where <code>a</code> and <code>b</code> are numbers and <code>a</code> &lt; <code>b</code>) is short hand notation for <code>seq(from = a, to = b, by = 1)</code>. Here are some examples:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-handling.html#cb53-1" aria-hidden="true" tabindex="-1"></a>music_data[ , <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="co"># all rows and columns 2,3,4</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[2],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[3],"type":["fct"],"align":["left"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"not explicit","3":"Dance"},{"1":"Imagine Dragons","2":"not explicit","3":"Alternative"},{"1":"J. Balvin","2":"not explicit","3":"Latino"},{"1":"Robin Schulz","2":"not explicit","3":"Dance"},{"1":"Jonas Blue","2":"not explicit","3":"Dance"},{"1":"David Guetta","2":"not explicit","3":"Dance"},{"1":"French Montana","2":"explicit","3":"Hip-Hop/Rap"},{"1":"Calvin Harris","2":"explicit","3":"Dance"},{"1":"Liam Payne","2":"not explicit","3":"Pop"},{"1":"Lauv","2":"not explicit","3":"Pop"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-handling.html#cb54-1" aria-hidden="true" tabindex="-1"></a>music_data[<span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>, ] <span class="co"># rows 5,6,7 and all columns</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","_rn_":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","_rn_":"6"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE","_rn_":"7"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Typically we don’t want to remember which row or column number is needed but use names and conditions (e.g, all explicit tracks). In order to make that easier we will add more functions to R by installing a package (sometimes also referred to as “library”) called <code>tidyverse</code>. We only have to install it once (per computer) and subsequently we can add the functions the package provides by calling <code>library(tidyverse)</code>. Typically <code>library(PACKAGENAME)</code> has to be called again whenever you restart R/RStudio. If you see the error message <code>could not find function ...</code> make sure you have loaded all the required packages. The <code>tidyverse</code> provides us with convenient tools to manipulate data.</p>
<p>You may create subsets of the data frame, e.g., using mathematical expressions using the <code>filter</code> function:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-handling.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.2 --
## v ggplot2 3.4.0      v purrr   1.0.1 
## v tibble  3.1.8      v dplyr   1.0.10
## v tidyr   1.2.1      v stringr 1.5.0 
## v readr   2.1.3      v forcats 0.5.2</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 4.2.2</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 4.2.2</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 4.2.2</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 4.2.2</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-handling.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(music_data, top10_track_explicit <span class="sc">==</span> <span class="st">&quot;explicit&quot;</span>) <span class="co"># show only tracks with explicit lyrics  </span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-handling.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(music_data, top10_track_streams <span class="sc">&gt;</span> <span class="dv">100000</span>) <span class="co"># show only tracks with more than 100,000 streams  </span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-handling.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(music_data, top10_artist_names <span class="sc">==</span> <span class="st">&#39;Robin Schulz&#39;</span>) <span class="co"># returns all observations from artist &quot;Robin Schulz&quot;</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-handling.html#cb65-1" aria-hidden="true" tabindex="-1"></a>explicit_tracks <span class="ot">&lt;-</span> <span class="fu">filter</span>(music_data, top10_track_explicit <span class="sc">==</span> <span class="st">&quot;explicit&quot;</span>) <span class="co"># assign a new data.frame for explicit tracs only</span></span></code></pre></div>
<p>You may also change the order of the rows in a <code>data.frame</code> by using the <code>arrange()</code>-function</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-handling.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Arrange by genre (ascending: A - Z) and streams (descending: maximum - minimum)</span></span>
<span id="cb66-2"><a href="data-handling.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(music_data, top10_artist_genre, <span class="fu">desc</span>(top10_track_streams))</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="inspecting-the-content-of-a-data-frame" class="section level4 hasAnchor" number="3.1.3.2">
<h4><span class="header-section-number">3.1.3.2</span> Inspecting the content of a data frame<a href="data-handling.html#inspecting-the-content-of-a-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>head()</code> function displays the first X elements/rows of a vector, matrix, table, data frame or function.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-handling.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(music_data, <span class="dv">3</span>) <span class="co"># returns the first X rows (here, the first 3 rows)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","_rn_":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","_rn_":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","_rn_":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The <code>tail()</code> function is similar, except it displays the last elements/rows.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-handling.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(music_data, <span class="dv">3</span>) <span class="co"># returns the last X rows (here, the last 3 rows)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE","_rn_":"8"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE","_rn_":"9"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE","_rn_":"10"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code>names()</code> returns the names of an R object. When, for example, it is called on a data frame, it returns the names of the columns.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-handling.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(music_data) <span class="co"># returns the names of the variables in the data frame</span></span></code></pre></div>
<pre><code>## [1] &quot;top10_track_streams&quot;       &quot;top10_artist_names&quot;       
## [3] &quot;top10_track_explicit&quot;      &quot;top10_artist_genre&quot;       
## [5] &quot;top_10_track_release_date&quot; &quot;top10_track_explicit_1&quot;</code></pre>
<p><code>str()</code> displays the internal structure of an R object. In the case of a data frame, it returns the class (e.g., numeric, factor, etc.) of each variable, as well as the number of observations and the number of variables.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-handling.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(music_data) <span class="co"># returns the structure of the data frame</span></span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  6 variables:
##  $ top10_track_streams      : num  163608 126687 120480 110022 108630 ...
##  $ top10_artist_names       : chr  &quot;Axwell /\\ Ingrosso&quot; &quot;Imagine Dragons&quot; &quot;J. Balvin&quot; &quot;Robin Schulz&quot; ...
##  $ top10_track_explicit     : Factor w/ 2 levels &quot;not explicit&quot;,..: 1 1 1 1 1 1 2 2 1 1
##  $ top10_artist_genre       : Factor w/ 5 levels &quot;Alternative&quot;,..: 2 1 4 2 2 2 3 2 5 5
##  $ top_10_track_release_date: Date, format: &quot;2017-05-24&quot; &quot;2017-06-23&quot; ...
##  $ top10_track_explicit_1   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...</code></pre>
<p><code>nrow()</code> and <code>ncol()</code> return the rows and columns of a data frame or matrix, respectively. <code>dim()</code> displays the dimensions of an R object.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-handling.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(music_data) <span class="co"># returns the number of rows </span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-handling.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(music_data) <span class="co"># returns the number of columns </span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-handling.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(music_data) <span class="co"># returns the dimensions of a data frame</span></span></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<p><code>ls()</code> can be used to list all objects that are associated with an R object.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-handling.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(music_data) <span class="co"># list all objects associated with an object</span></span></code></pre></div>
<pre><code>## [1] &quot;top_10_track_release_date&quot; &quot;top10_artist_genre&quot;       
## [3] &quot;top10_artist_names&quot;        &quot;top10_track_explicit&quot;     
## [5] &quot;top10_track_explicit_1&quot;    &quot;top10_track_streams&quot;</code></pre>
</div>
<div id="select-append-and-delete-variables-tofrom-data-frames" class="section level4 hasAnchor" number="3.1.3.3">
<h4><span class="header-section-number">3.1.3.3</span> Select, append and delete variables to/from data frames<a href="data-handling.html#select-append-and-delete-variables-tofrom-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To return a single column in a data frame, use the <code>$</code> notation. For example, this returns all values associated with the variable “top10_track_streams”:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-handling.html#cb81-1" aria-hidden="true" tabindex="-1"></a>music_data<span class="sc">$</span>top10_track_streams</span></code></pre></div>
<pre><code>##  [1] 163608 126687 120480 110022 108630  95639  94690  89011  87869  85599</code></pre>
<p>If you want to select more than one variable you can use the <code>select</code> function. It takes the <code>data.frame</code> containing the data as its first argument and the variables that you need after it:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-handling.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(music_data, top10_artist_names, top10_track_streams, top10_track_explicit)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["chr"],"align":["left"]},{"label":["top10_track_streams"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"163608","3":"not explicit"},{"1":"Imagine Dragons","2":"126687","3":"not explicit"},{"1":"J. Balvin","2":"120480","3":"not explicit"},{"1":"Robin Schulz","2":"110022","3":"not explicit"},{"1":"Jonas Blue","2":"108630","3":"not explicit"},{"1":"David Guetta","2":"95639","3":"not explicit"},{"1":"French Montana","2":"94690","3":"explicit"},{"1":"Calvin Harris","2":"89011","3":"explicit"},{"1":"Liam Payne","2":"87869","3":"not explicit"},{"1":"Lauv","2":"85599","3":"not explicit"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code>select</code> can also be used to remove columns by prepending a <code>-</code> to their name:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-handling.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(music_data, <span class="sc">-</span>top_10_track_release_date, <span class="sc">-</span>top10_track_explicit_1)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Assume that you wanted to add an additional variable to the data frame. You may use the <code>$</code> notation to achieve this:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-handling.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new variable as the log of the number of streams </span></span>
<span id="cb85-2"><a href="data-handling.html#cb85-2" aria-hidden="true" tabindex="-1"></a>music_data<span class="sc">$</span>log_streams <span class="ot">&lt;-</span> <span class="fu">log</span>(music_data<span class="sc">$</span>top10_track_streams) </span>
<span id="cb85-3"><a href="data-handling.html#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an ascending count variable which might serve as an ID</span></span>
<span id="cb85-4"><a href="data-handling.html#cb85-4" aria-hidden="true" tabindex="-1"></a>music_data<span class="sc">$</span>obs_number <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(music_data)</span>
<span id="cb85-5"><a href="data-handling.html#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["log_streams"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["obs_number"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"12.00523","8":"1","_rn_":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"11.74947","8":"2","_rn_":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"11.69924","8":"3","_rn_":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"11.60844","8":"4","_rn_":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"11.59570","8":"5","_rn_":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"11.46834","8":"6","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>In order to add a function (e.g., <code>log</code>) of multiple existing variables to the <code>data.frame</code> use <code>mutate</code>. Multiple commands can be chained using so called pipes - operators that can be read as “then”. Since R version 4.1 there are native pipes (<code>|&gt;</code>) as well as the ones provided by the <code>tidyverse</code> (<code>%&gt;%</code>):</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-handling.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(music_data, </span>
<span id="cb86-2"><a href="data-handling.html#cb86-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">sqrt_streams =</span> <span class="fu">sqrt</span>(top10_track_streams),</span>
<span id="cb86-3"><a href="data-handling.html#cb86-3" aria-hidden="true" tabindex="-1"></a>       <span class="co"># &quot;%Y&quot; extracts the year, format returns a character</span></span>
<span id="cb86-4"><a href="data-handling.html#cb86-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">release_year =</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(top_10_track_release_date, <span class="st">&quot;%Y&quot;</span>)) </span>
<span id="cb86-5"><a href="data-handling.html#cb86-5" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">|&gt;</span></span>
<span id="cb86-6"><a href="data-handling.html#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(top10_artist_names, sqrt_streams, release_year)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sqrt_streams"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["release_year"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"404.4849","3":"2017"},{"1":"Imagine Dragons","2":"355.9312","3":"2017"},{"1":"J. Balvin","2":"347.1023","3":"2017"},{"1":"Robin Schulz","2":"331.6956","3":"2017"},{"1":"Jonas Blue","2":"329.5907","3":"2017"},{"1":"David Guetta","2":"309.2556","3":"2017"},{"1":"French Montana","2":"307.7174","3":"2017"},{"1":"Calvin Harris","2":"298.3471","3":"2017"},{"1":"Liam Payne","2":"296.4271","3":"2017"},{"1":"Lauv","2":"292.5731","3":"2017"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can also rename variables in a data frame, e.g., using the <code>rename()</code>-function. In the following code “::” signifies that the function “rename” should be taken from the package “dplyr” (note: this package is part of the <code>tidyverse</code>). This can be useful if multiple packages have a function with the same name. Calling a function this way also means that you can access a function without loading the entire package via <code>library()</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-handling.html#cb87-1" aria-hidden="true" tabindex="-1"></a>music_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(music_data, <span class="at">genre =</span> top10_artist_genre, <span class="at">release_date =</span> top_10_track_release_date)</span>
<span id="cb87-2"><a href="data-handling.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["log_streams"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["obs_number"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"12.00523","8":"1","_rn_":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"11.74947","8":"2","_rn_":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"11.69924","8":"3","_rn_":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"11.60844","8":"4","_rn_":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"11.59570","8":"5","_rn_":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"11.46834","8":"6","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Note that the same can be achieved using:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="data-handling.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(music_data)[<span class="fu">names</span>(music_data)<span class="sc">==</span><span class="st">&quot;genre&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;top10_artist_genre&quot;</span></span>
<span id="cb88-2"><a href="data-handling.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["log_streams"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["obs_number"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"12.00523","8":"1","_rn_":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"11.74947","8":"2","_rn_":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"11.69924","8":"3","_rn_":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"11.60844","8":"4","_rn_":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"11.59570","8":"5","_rn_":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"11.46834","8":"6","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Or by referring to the index of the variable:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-handling.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(music_data)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">&quot;genre&quot;</span></span>
<span id="cb89-2"><a href="data-handling.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["log_streams"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["obs_number"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"12.00523","8":"1","_rn_":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"11.74947","8":"2","_rn_":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"11.69924","8":"3","_rn_":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"11.60844","8":"4","_rn_":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"11.59570","8":"5","_rn_":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"11.46834","8":"6","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<!-- TODO: change dataset, add summarize, group by -->
<p><br><br></p>
<div class="infobox_orange hint">
<p>Note that the data handling approach explained in this chapter touches on the so-called ‘base R’ and ‘tidyverse’ dialects. There are other dialects in R, which are basically different ways of achieving the same thing. Another popular dialect in R is ‘data.table’, see e.g., <a href="https://wetlandscapes.com/blog/a-comparison-of-r-dialects/">here</a> and <a href="https://atrebas.github.io/post/2019-03-03-datatable-dplyr/">here</a>. Once you become more advanced, you may want to look into the other dialects to achieve certain tasks more efficiently. For now, it is sufficient to be aware that there are other approaches to data handling and each dialect has it’s strengths and weaknesses. We will be mostly using ‘base R’ for the tutorial on this website.</p>
</div>

</div>
</div>
</div>
<div id="data-import-and-export" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data import and export<a href="data-handling.html#data-import-and-export" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="infobox download">
<p><a href="./Code/02-data_import.R">You can download the corresponding R-Code here</a></p>
</div>
<br>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/rMArARTb-jo" frameborder="0" allowfullscreen>
</iframe>
</div>
<p><br></p>
<p>Before you can start your analysis in R, you first need to import the data you wish to perform the analysis on. You will often be faced with different types of data formats (usually produced by some other statistical software like SPSS or Excel or a text editor). Fortunately, R is fairly flexible with respect to the sources from which data may be imported and you can import the most common data formats into R with the help of a few packages. R can, among others, handle data from the following sources:</p>
<p><img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/data_import.JPG" /></p>
<p>In the previous chapter, we saw how we may use the keyboard to input data in R. In the following sections, we will learn how to import data from text files and other statistical software packages.</p>
<div id="getting-data-for-this-course" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Getting data for this course<a href="data-handling.html#getting-data-for-this-course" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most of the data sets we will be working with in this course will be stored in text files (i.e., .dat, .txt, .csv). All data sets we will be working with are stored in a repository on GitHub (similar to other cloud storage services such as Dropbox). You can directly import these data sets from GitHub without having to copy data sets from one place to another. If you know the location, where the files are stored, you may conveniently load the data directly from GitHub into R using the <code>read.csv()</code> function. To figure out the structure of the data you can read the first couple of lines of a file using the <code>readLines</code> function. The <code>header=TRUE</code> argument in the <code>read.csv</code> function indicates that the first line of data represents the header, i.e., it contains the names of the columns. The <code>sep=";"</code>-argument specifies the delimiter (the character used to separate the columns), which is a “;” in this case.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="data-handling.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">&quot;https://short.wu.ac.at/ma22_musicdata&quot;</span>, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;\&quot;isrc\&quot;;\&quot;artist_id\&quot;;\&quot;streams\&quot;;\&quot;weeks_in_charts\&quot;;\&quot;n_regions\&quot;;\&quot;danceability\&quot;;\&quot;energy\&quot;;\&quot;speechiness\&quot;;\&quot;instrumentalness\&quot;;\&quot;liveness\&quot;;\&quot;valence\&quot;;\&quot;tempo\&quot;;\&quot;song_length\&quot;;\&quot;song_age\&quot;;\&quot;explicit\&quot;;\&quot;n_playlists\&quot;;\&quot;sp_popularity\&quot;;\&quot;youtube_views\&quot;;\&quot;tiktok_counts\&quot;;\&quot;ins_followers_artist\&quot;;\&quot;monthly_listeners_artist\&quot;;\&quot;playlist_total_reach_artist\&quot;;\&quot;sp_fans_artist\&quot;;\&quot;shazam_counts\&quot;;\&quot;artistName\&quot;;\&quot;trackName\&quot;;\&quot;release_date\&quot;;\&quot;genre\&quot;;\&quot;label\&quot;;\&quot;top10\&quot;;\&quot;expert_rating\&quot;&quot;
## [2] &quot;\&quot;BRRGE1603547\&quot;;3679;11944813;141;1;50,9;80,3;4;0,05;46,3;65,1;166,018;3,11865;228,285714285714;0;450;51;145030723;9740;29613108;4133393;24286416;3308630;73100;\&quot;Luan Santana\&quot;;\&quot;Eu, VocÃª, O Mar e Ela\&quot;;\&quot;2016-06-20\&quot;;\&quot;other\&quot;;\&quot;Independent\&quot;;1;\&quot;excellent\&quot;&quot;                                                                                                                                                                                                                                            
## [3] &quot;\&quot;USUM71808193\&quot;;5239;8934097;51;21;35,3;75,5;73,3;0;39;43,7;191,153;3,228;144,285714285714;0;768;54;13188411;358700;3693566;18367363;143384531;465412;588550;\&quot;Alessia Cara\&quot;;\&quot;Growing Pains\&quot;;\&quot;2018-06-14\&quot;;\&quot;Pop\&quot;;\&quot;Universal Music\&quot;;0;\&quot;good\&quot;&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-handling.html#cb92-1" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://short.wu.ac.at/ma22_musicdata&quot;</span>, </span>
<span id="cb92-2"><a href="data-handling.html#cb92-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>, </span>
<span id="cb92-3"><a href="data-handling.html#cb92-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb92-4"><a href="data-handling.html#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["isrc"],"name":[1],"type":["chr"],"align":["left"]},{"label":["artist_id"],"name":[2],"type":["int"],"align":["right"]},{"label":["streams"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["weeks_in_charts"],"name":[4],"type":["int"],"align":["right"]},{"label":["n_regions"],"name":[5],"type":["int"],"align":["right"]},{"label":["danceability"],"name":[6],"type":["chr"],"align":["left"]},{"label":["energy"],"name":[7],"type":["chr"],"align":["left"]},{"label":["speechiness"],"name":[8],"type":["chr"],"align":["left"]},{"label":["instrumentalness"],"name":[9],"type":["chr"],"align":["left"]},{"label":["liveness"],"name":[10],"type":["chr"],"align":["left"]},{"label":["valence"],"name":[11],"type":["chr"],"align":["left"]},{"label":["tempo"],"name":[12],"type":["chr"],"align":["left"]},{"label":["song_length"],"name":[13],"type":["chr"],"align":["left"]},{"label":["song_age"],"name":[14],"type":["chr"],"align":["left"]},{"label":["explicit"],"name":[15],"type":["int"],"align":["right"]},{"label":["n_playlists"],"name":[16],"type":["int"],"align":["right"]},{"label":["sp_popularity"],"name":[17],"type":["int"],"align":["right"]},{"label":["youtube_views"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["tiktok_counts"],"name":[19],"type":["int"],"align":["right"]},{"label":["ins_followers_artist"],"name":[20],"type":["int"],"align":["right"]},{"label":["monthly_listeners_artist"],"name":[21],"type":["int"],"align":["right"]},{"label":["playlist_total_reach_artist"],"name":[22],"type":["int"],"align":["right"]},{"label":["sp_fans_artist"],"name":[23],"type":["int"],"align":["right"]},{"label":["shazam_counts"],"name":[24],"type":["int"],"align":["right"]},{"label":["artistName"],"name":[25],"type":["chr"],"align":["left"]},{"label":["trackName"],"name":[26],"type":["chr"],"align":["left"]},{"label":["release_date"],"name":[27],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[28],"type":["chr"],"align":["left"]},{"label":["label"],"name":[29],"type":["chr"],"align":["left"]},{"label":["top10"],"name":[30],"type":["int"],"align":["right"]},{"label":["expert_rating"],"name":[31],"type":["chr"],"align":["left"]}],"data":[{"1":"BRRGE1603547","2":"3679","3":"11944813","4":"141","5":"1","6":"50,9","7":"80,3","8":"4","9":"0,05","10":"46,3","11":"65,1","12":"166,018","13":"3,11865","14":"228,285714285714","15":"0","16":"450","17":"51","18":"145030723","19":"9740","20":"29613108","21":"4133393","22":"24286416","23":"3308630","24":"73100","25":"Luan Santana","26":"Eu, VocÃª, O Mar e Ela","27":"2016-06-20","28":"other","29":"Independent","30":"1","31":"excellent"},{"1":"USUM71808193","2":"5239","3":"8934097","4":"51","5":"21","6":"35,3","7":"75,5","8":"73,3","9":"0","10":"39","11":"43,7","12":"191,153","13":"3,228","14":"144,285714285714","15":"0","16":"768","17":"54","18":"13188411","19":"358700","20":"3693566","21":"18367363","22":"143384531","23":"465412","24":"588550","25":"Alessia Cara","26":"Growing Pains","27":"2018-06-14","28":"Pop","29":"Universal Music","30":"0","31":"good"},{"1":"ES5701800181","2":"776407","3":"38835","4":"1","5":"1","6":"68,3","7":"67,6","8":"14,7","9":"0","10":"7,26","11":"43,4","12":"98,992","13":"3,01555","14":"112,285714285714","15":"0","16":"48","17":"32","18":"6116639","19":"0","20":"623778","21":"888273","22":"4846378","23":"23846","24":"0","25":"Ana Guerra","26":"El Remedio","27":"2018-04-26","28":"Pop","29":"Universal Music","30":"0","31":"good"},{"1":"ITRSE2000050","2":"433730","3":"46766","4":"1","5":"1","6":"70,4","7":"56,8","8":"26,8","9":"0,000253","10":"8,91","11":"49,5","12":"91,007","13":"3,45341666666667","14":"50,7142857142857","15":"0","16":"6","17":"44","18":"0","19":"13","20":"81601","21":"143761","22":"156521","23":"1294","24":"0","25":"Claver Gold feat. Murubutu","26":"Ulisse","27":"2020-03-31","28":"HipHop/Rap","29":"Independent","30":"0","31":"poor"},{"1":"QZJ842000061","2":"526471","3":"2930573","4":"7","5":"4","6":"84,2","7":"57,8","8":"13,8","9":"0","10":"22,8","11":"19","12":"74,496","13":"3,94631666666667","14":"58,2857142857143","15":"0","16":"475","17":"52","18":"0","19":"515","20":"11962358","21":"15551876","22":"90841884","23":"380204","24":"55482","25":"Trippie Redd feat. Young Thug","26":"YELL OH","27":"2020-02-07","28":"HipHop/Rap","29":"Universal Music","30":"0","31":"excellent"},{"1":"USIR20400274","2":"1939","3":"72199738","4":"226","5":"8","6":"35,2","7":"91,1","8":"7,47","9":"0","10":"9,95","11":"23,6","12":"148,033","13":"3,71621666666667","14":"876,714285714286","15":"0","16":"20591","17":"81","18":"20216069","19":"67300","20":"1169284","21":"16224250","22":"80408253","23":"1651866","24":"5281161","25":"The Killers","26":"Mr. Brightside","27":"2004-06-07","28":"Rock","29":"Universal Music","30":"1","31":"fair"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Note that it is also possible to download the data, placing it in the working directory and importing it from there. However, this requires an additional step to download the file manually first. If you chose this option, please <strong>remember to put the data file in the working directory first</strong>. If the import is not working, check your working directory setting using <code>getwd()</code>. Once you placed the file in the working directory, you can import it using the same command as above. Note that the file must be given as a character string (i.e., in quotation marks) and has to end with the file extension (e.g., .csv, .tsv, etc.).</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-handling.html#cb93-1" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/music_data_fin.csv&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;;&quot;</span>)</span>
<span id="cb93-2"><a href="data-handling.html#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(test_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["isrc"],"name":[1],"type":["chr"],"align":["left"]},{"label":["artist_id"],"name":[2],"type":["int"],"align":["right"]},{"label":["streams"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["weeks_in_charts"],"name":[4],"type":["int"],"align":["right"]},{"label":["n_regions"],"name":[5],"type":["int"],"align":["right"]},{"label":["danceability"],"name":[6],"type":["chr"],"align":["left"]},{"label":["energy"],"name":[7],"type":["chr"],"align":["left"]},{"label":["speechiness"],"name":[8],"type":["chr"],"align":["left"]},{"label":["instrumentalness"],"name":[9],"type":["chr"],"align":["left"]},{"label":["liveness"],"name":[10],"type":["chr"],"align":["left"]},{"label":["valence"],"name":[11],"type":["chr"],"align":["left"]},{"label":["tempo"],"name":[12],"type":["chr"],"align":["left"]},{"label":["song_length"],"name":[13],"type":["chr"],"align":["left"]},{"label":["song_age"],"name":[14],"type":["chr"],"align":["left"]},{"label":["explicit"],"name":[15],"type":["int"],"align":["right"]},{"label":["n_playlists"],"name":[16],"type":["int"],"align":["right"]},{"label":["sp_popularity"],"name":[17],"type":["int"],"align":["right"]},{"label":["youtube_views"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["tiktok_counts"],"name":[19],"type":["int"],"align":["right"]},{"label":["ins_followers_artist"],"name":[20],"type":["int"],"align":["right"]},{"label":["monthly_listeners_artist"],"name":[21],"type":["int"],"align":["right"]},{"label":["playlist_total_reach_artist"],"name":[22],"type":["int"],"align":["right"]},{"label":["sp_fans_artist"],"name":[23],"type":["int"],"align":["right"]},{"label":["shazam_counts"],"name":[24],"type":["int"],"align":["right"]},{"label":["artistName"],"name":[25],"type":["chr"],"align":["left"]},{"label":["trackName"],"name":[26],"type":["chr"],"align":["left"]},{"label":["release_date"],"name":[27],"type":["chr"],"align":["left"]},{"label":["genre"],"name":[28],"type":["chr"],"align":["left"]},{"label":["label"],"name":[29],"type":["chr"],"align":["left"]},{"label":["top10"],"name":[30],"type":["int"],"align":["right"]},{"label":["expert_rating"],"name":[31],"type":["chr"],"align":["left"]}],"data":[{"1":"BRRGE1603547","2":"3679","3":"11944813","4":"141","5":"1","6":"50,9","7":"80,3","8":"4","9":"0,05","10":"46,3","11":"65,1","12":"166,018","13":"3,11865","14":"228,285714285714","15":"0","16":"450","17":"51","18":"145030723","19":"9740","20":"29613108","21":"4133393","22":"24286416","23":"3308630","24":"73100","25":"Luan Santana","26":"Eu, VocÃª, O Mar e Ela","27":"2016-06-20","28":"other","29":"Independent","30":"1","31":"excellent"},{"1":"USUM71808193","2":"5239","3":"8934097","4":"51","5":"21","6":"35,3","7":"75,5","8":"73,3","9":"0","10":"39","11":"43,7","12":"191,153","13":"3,228","14":"144,285714285714","15":"0","16":"768","17":"54","18":"13188411","19":"358700","20":"3693566","21":"18367363","22":"143384531","23":"465412","24":"588550","25":"Alessia Cara","26":"Growing Pains","27":"2018-06-14","28":"Pop","29":"Universal Music","30":"0","31":"good"},{"1":"ES5701800181","2":"776407","3":"38835","4":"1","5":"1","6":"68,3","7":"67,6","8":"14,7","9":"0","10":"7,26","11":"43,4","12":"98,992","13":"3,01555","14":"112,285714285714","15":"0","16":"48","17":"32","18":"6116639","19":"0","20":"623778","21":"888273","22":"4846378","23":"23846","24":"0","25":"Ana Guerra","26":"El Remedio","27":"2018-04-26","28":"Pop","29":"Universal Music","30":"0","31":"good"},{"1":"ITRSE2000050","2":"433730","3":"46766","4":"1","5":"1","6":"70,4","7":"56,8","8":"26,8","9":"0,000253","10":"8,91","11":"49,5","12":"91,007","13":"3,45341666666667","14":"50,7142857142857","15":"0","16":"6","17":"44","18":"0","19":"13","20":"81601","21":"143761","22":"156521","23":"1294","24":"0","25":"Claver Gold feat. Murubutu","26":"Ulisse","27":"2020-03-31","28":"HipHop/Rap","29":"Independent","30":"0","31":"poor"},{"1":"QZJ842000061","2":"526471","3":"2930573","4":"7","5":"4","6":"84,2","7":"57,8","8":"13,8","9":"0","10":"22,8","11":"19","12":"74,496","13":"3,94631666666667","14":"58,2857142857143","15":"0","16":"475","17":"52","18":"0","19":"515","20":"11962358","21":"15551876","22":"90841884","23":"380204","24":"55482","25":"Trippie Redd feat. Young Thug","26":"YELL OH","27":"2020-02-07","28":"HipHop/Rap","29":"Universal Music","30":"0","31":"excellent"},{"1":"USIR20400274","2":"1939","3":"72199738","4":"226","5":"8","6":"35,2","7":"91,1","8":"7,47","9":"0","10":"9,95","11":"23,6","12":"148,033","13":"3,71621666666667","14":"876,714285714286","15":"0","16":"20591","17":"81","18":"20216069","19":"67300","20":"1169284","21":"16224250","22":"80408253","23":"1651866","24":"5281161","25":"The Killers","26":"Mr. Brightside","27":"2004-06-07","28":"Rock","29":"Universal Music","30":"1","31":"fair"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="import-data-created-by-other-software-packages" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Import data created by other software packages<a href="data-handling.html#import-data-created-by-other-software-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, you may need to import data files created by other software packages, such as Excel or SPSS. In this section we will use the <code>readxl</code> and <code>haven</code> packages to do this. To import a certain file you should first make sure that the file is stored in your current working directory. You can list all file names in your working directory using the <code>list.files()</code> function. If the file is not there, either copy it to your current working directory, or set your working directory to the folder where the file is located using <code>setwd("/path/to/file")</code>. This tells R the folder you are working in. Remember that you have to use <code>/</code> instead of <code>\</code> to specify the path (if you use Windows paths copied from the explorer they will not work). When your file is in your working directory you can simply enter the filename into the respective import command. The import commands offer various options. For more details enter <code>?read_excel</code>, <code>?read_spss</code> after loading the packages.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-handling.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">#import excel files</span></span>
<span id="cb94-2"><a href="data-handling.html#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl) <span class="co">#load package to import Excel files</span></span>
<span id="cb94-3"><a href="data-handling.html#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">excel_sheets</span>(<span class="st">&quot;test_data.xlsx&quot;</span>)</span>
<span id="cb94-4"><a href="data-handling.html#cb94-4" aria-hidden="true" tabindex="-1"></a>survey_data_xlsx <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;test_data.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;mrda_2016_survey&quot;</span>) <span class="co"># &quot;sheet=x&quot;&quot; specifies which sheet to import</span></span>
<span id="cb94-5"><a href="data-handling.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survey_data_xlsx)</span>
<span id="cb94-6"><a href="data-handling.html#cb94-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-7"><a href="data-handling.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven) <span class="co">#load package to import SPSS files</span></span>
<span id="cb94-8"><a href="data-handling.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="co">#import SPSS files</span></span>
<span id="cb94-9"><a href="data-handling.html#cb94-9" aria-hidden="true" tabindex="-1"></a>survey_data_spss <span class="ot">&lt;-</span> <span class="fu">read_sav</span>(<span class="st">&quot;test_data.sav&quot;</span>)</span>
<span id="cb94-10"><a href="data-handling.html#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survey_data_spss)</span></code></pre></div>
<p>The import of other file formats works in a very similar way (e.g., Stata, SAS). Please refer to the respective help-files (e.g., <code>?read_dta</code>, <code>?read_sas</code> …) if you wish to import data created by other software packages.</p>
</div>
<div id="import-data-from-qualtrics" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Import data from Qualtrics<a href="data-handling.html#import-data-from-qualtrics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is also a dedicated package ‘qualtRics’ which lets you conveniently import data from surveys you conducted via Qualtrics. Simply export your data from Qualtrics as a .csv file (standard option) and you can read it into R as follows:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data-handling.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qualtRics)</span>
<span id="cb95-2"><a href="data-handling.html#cb95-2" aria-hidden="true" tabindex="-1"></a>qualtrics <span class="ot">&lt;-</span> <span class="fu">read_survey</span>(<span class="st">&#39;qualtrics_survey.csv&#39;</span>)</span>
<span id="cb95-3"><a href="data-handling.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(qualtrics)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["StartDate"],"name":[1],"type":["dttm"],"align":["right"]},{"label":["EndDate"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["Status"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["IPAddress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Progress"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Duration (in seconds)"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Finished"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["RecordedDate"],"name":[8],"type":["dttm"],"align":["right"]},{"label":["ResponseId"],"name":[9],"type":["chr"],"align":["left"]},{"label":["RecipientLastName"],"name":[10],"type":["lgl"],"align":["right"]},{"label":["RecipientFirstName"],"name":[11],"type":["lgl"],"align":["right"]},{"label":["RecipientEmail"],"name":[12],"type":["lgl"],"align":["right"]},{"label":["ExternalReference"],"name":[13],"type":["lgl"],"align":["right"]},{"label":["LocationLatitude"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["LocationLongitude"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DistributionChannel"],"name":[16],"type":["chr"],"align":["left"]},{"label":["UserLanguage"],"name":[17],"type":["chr"],"align":["left"]},{"label":["Q2"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["Q2_3_TEXT"],"name":[19],"type":["lgl"],"align":["right"]},{"label":["Q3_1"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["Q3_2"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["Q3_3"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["Q3_4"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["Q4_1"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["Q4_2"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["Q4_3"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["Q4_4"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["Q5_1"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["Q13_1"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["Q13_2"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["Q13_3"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["Q13_4"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["Q15...33"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["Q15_1"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["Q15_2"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["Q15_3"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["Q15_4"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["Q15_5"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["Q15_6"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["Q6"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["Q6_4_TEXT"],"name":[41],"type":["chr"],"align":["left"]},{"label":["Q12_1"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["Q14"],"name":[43],"type":["dbl"],"align":["right"]},{"label":["Q15...44"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["Q16"],"name":[45],"type":["dbl"],"align":["right"]},{"label":["Q8"],"name":[46],"type":["chr"],"align":["left"]}],"data":[{"1":"2020-10-01 10:22:59","2":"2020-10-01 10:25:14","3":"0","4":"137.208.216.243","5":"100","6":"134","7":"1","8":"2020-10-01 10:25:15","9":"R_sN04PjxtCINkx8d","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.19820","15":"16.39169","16":"anonymous","17":"EN","18":"4","19":"NA","20":"3","21":"3","22":"3","23":"3","24":"2","25":"2","26":"2","27":"2","28":"3","29":"2","30":"1","31":"1","32":"4","33":"60","34":"1","35":"3","36":"3","37":"2","38":"1","39":"1","40":"2","41":"NA","42":"4","43":"2","44":"1","45":"1","46":"Please good explanation of the tools! Thank you!"},{"1":"2020-10-01 10:59:08","2":"2020-10-01 11:01:35","3":"0","4":"212.95.5.104","5":"100","6":"147","7":"1","8":"2020-10-01 11:01:36","9":"R_etFjdrEoiuFW9MJ","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.20490","15":"16.36620","16":"anonymous","17":"EN","18":"1","19":"NA","20":"2","21":"1","22":"3","23":"2","24":"4","25":"2","26":"4","27":"2","28":"1","29":"2","30":"2","31":"2","32":"4","33":"30","34":"1","35":"2","36":"1","37":"3","38":"1","39":"1","40":"2","41":"NA","42":"3","43":"2","44":"1","45":"2","46":"NA"},{"1":"2020-10-01 11:51:20","2":"2020-10-01 12:00:23","3":"0","4":"153.206.44.76","5":"100","6":"542","7":"1","8":"2020-10-01 12:00:23","9":"R_12ffeAmb47abiGF","10":"NA","11":"NA","12":"NA","13":"NA","14":"35.67780","15":"139.70819","16":"anonymous","17":"EN","18":"1","19":"NA","20":"3","21":"2","22":"2","23":"2","24":"1","25":"4","26":"3","27":"4","28":"2","29":"1","30":"1","31":"1","32":"5","33":"30","34":"1","35":"1","36":"2","37":"2","38":"1","39":"2","40":"2","41":"NA","42":"5","43":"2","44":"2","45":"2","46":"The most useful marketing research method in reality. More focus on the practice than the theories, for example, how R or Python be used when facing a real project."},{"1":"2020-10-01 12:12:30","2":"2020-10-01 12:16:34","3":"0","4":"212.95.8.240","5":"100","6":"243","7":"1","8":"2020-10-01 12:16:34","9":"R_2tln3oakBkxOXQJ","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.21690","15":"16.49969","16":"anonymous","17":"EN","18":"4","19":"NA","20":"1","21":"2","22":"1","23":"1","24":"2","25":"3","26":"1","27":"1","28":"1","29":"1","30":"3","31":"1","32":"4","33":"40","34":"1","35":"1","36":"1","37":"4","38":"1","39":"1","40":"7","41":"NA","42":"4","43":"2","44":"1","45":"2","46":"I have not had the opportunity to learn a lot about marketing research so far, that’s why a general overview of the most used methods would be nice."},{"1":"2020-10-01 12:14:36","2":"2020-10-01 12:17:33","3":"0","4":"185.69.244.110","5":"100","6":"176","7":"1","8":"2020-10-01 12:17:33","9":"R_2fJOrbsRaKtgMTd","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.20309","15":"16.35271","16":"anonymous","17":"EN","18":"1","19":"NA","20":"2","21":"2","22":"2","23":"2","24":"4","25":"4","26":"4","27":"4","28":"2","29":"3","30":"2","31":"3","32":"4","33":"40","34":"2","35":"1","36":"1","37":"4","38":"1","39":"1","40":"1","41":"NA","42":"5","43":"2","44":"1","45":"1","46":"NA"},{"1":"2020-10-01 12:25:44","2":"2020-10-01 12:29:12","3":"0","4":"185.69.244.212","5":"100","6":"207","7":"1","8":"2020-10-01 12:29:12","9":"R_2bK4w2y7ZbiJ8Tc","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.20309","15":"16.35271","16":"anonymous","17":"EN","18":"1","19":"NA","20":"2","21":"2","22":"2","23":"1","24":"4","25":"4","26":"4","27":"2","28":"2","29":"4","30":"2","31":"2","32":"2","33":"50","34":"2","35":"2","36":"1","37":"3","38":"1","39":"1","40":"2","41":"NA","42":"4","43":"2","44":"1","45":"1","46":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>When you inspect the data frame in R after you imported the data, you will find that it has some additional information compared to a standard .csv file. For example, each question (column) has the question number that you assigned in Qualtrics but also the Question text as an additional label.</p>
</div>
<div id="export-data" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Export data<a href="data-handling.html#export-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Exporting to different formats is also easy, as you can just replace “read” with “write” in many of the previously discussed functions (e.g. <code>write.csv(object, "file_name")</code>). This will save the data file to the working directory. To check what the current working directory is you can use <code>getwd()</code>. By default, the <code>write.csv(object, "file_name")</code>function includes the row number as the first variable. By specifying <code>row.names = FALSE</code>, you may exclude this variable since it doesn’t contain any useful information.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data-handling.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(music_data, <span class="st">&quot;musicData.csv&quot;</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>) <span class="co">#writes to a comma-separated value file </span></span>
<span id="cb96-2"><a href="data-handling.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_sav</span>(music_data, <span class="st">&quot;musicData.sav&quot;</span>)</span></code></pre></div>
</div>
<div id="import-data-from-the-web" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Import data from the Web<a href="data-handling.html#import-data-from-the-web" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="scraping-data-from-websites" class="section level4 hasAnchor" number="3.2.5.1">
<h4><span class="header-section-number">3.2.5.1</span> Scraping data from websites<a href="data-handling.html#scraping-data-from-websites" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes you may come across interesting data on websites that you would like to analyze. Reading data from websites is possible in R, e.g., using the <code>rvest</code> package. Let’s assume you would like to read a table that lists the population of different countries from <a href="https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population" target="_blank">this Wikipedia page</a>. It helps to first inspect the structure of the website (e.g., using tools like <a href="http://selectorgadget.com/" target="_blank">SelectorGadget</a>), so you know which elements you would like to extract. In this case it is fairly obvious that the data are stored in a table for which the associated html-tag is <code>&lt;table&gt;</code>. So let’s read the entire website using <code>read_html(url)</code> and filter all tables using <code>read_html(html_nodes(...,"table"))</code>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-handling.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb97-2"><a href="data-handling.html#cb97-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population&quot;</span></span>
<span id="cb97-3"><a href="data-handling.html#cb97-3" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url) </span>
<span id="cb97-4"><a href="data-handling.html#cb97-4" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">html_nodes</span>(population, <span class="st">&quot;table.wikitable&quot;</span>)</span>
<span id="cb97-5"><a href="data-handling.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(population)</span></code></pre></div>
<pre><code>## {xml_nodeset (1)}
## [1] &lt;table class=&quot;wikitable sortable&quot;&gt;&lt;tbody&gt;\n&lt;tr&gt;\n&lt;th&gt;Rank&lt;/th&gt;\n&lt;th&gt;\n&lt;a  ...</code></pre>
<p>The output shows that there are two tables on the website and the first one appears to contain the relevant information. So let’s read the first table using the <code>html_table()</code> function. Note that <code>population</code> is of class “list”. A list is a vector that has other R objects (e.g., other vectors, data frames, matrices, etc.) as its elements. If we want to access the data of one of the elements, we have to use two square brackets on each side instead of just one (e.g., <code>population[[1]]</code> gets us the first table from the list of tables on the website; the argument <code>fill = TRUE</code> ensures that empty cells are replaced with missing values when reading the table).</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data-handling.html#cb99-1" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> population[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb99-2"><a href="data-handling.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(population) <span class="co">#checks if we scraped the desired data</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Rank"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Country / Dependency"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Percentage of the world"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Date"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Source (official or from the United Nations)"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Notes"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"–","2":"World","3":"7,984,239,000","4":"100%","5":"12 Oct 2022","6":"UN projection[3]","7":""},{"1":"1","2":"China","3":"1,412,600,000","4":"17.7%","5":"31 Dec 2021","6":"Official estimate[4]","7":"The population figure refers to mainland China, excluding its special administrative regions of Hong Kong and Macau, the former of which returned to Chinese sovereignty in 1997 and the latter in 1999."},{"1":"2","2":"India","3":"1,375,586,000","4":"17.2%","5":"1 Mar 2022","6":"Official projection[5]","7":"The figure includes the population of Indian-administered Jammu and Kashmir and Ladakh."},{"1":"3","2":"United States","3":"331,893,745","4":"4.16%","5":"1 Jul 2021","6":"Official estimate[6]","7":"The figure includes the 50 states and the District of Columbia, but excludes the territories of the United States."},{"1":"4","2":"Indonesia","3":"275,773,800","4":"3.45%","5":"1 Jul 2022","6":"Official estimate[7]","7":""},{"1":"5","2":"Pakistan","3":"229,489,000","4":"2.87%","5":"1 Jul 2022","6":"UN projection[3]","7":"The figure includes the population of Pakistan-administered Azad Kashmir and Gilgit-Baltistan."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can see that population is read as a character variable because of the commas.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-handling.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(population<span class="sc">$</span>Population)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>If we wanted to use this variable for some kind of analysis, we would first need to convert it to numeric format using the <code>as.numeric()</code> function. However, before we can do this, we can use the <code>str_replace_all()</code> function from the stringr package, which replaces all matches of a string. In our case, we would like to replace the commas (<code>","</code>) with nothing (<code>""</code>).</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-handling.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb102-2"><a href="data-handling.html#cb102-2" aria-hidden="true" tabindex="-1"></a>population<span class="sc">$</span>Population <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">str_replace_all</span>(population<span class="sc">$</span>Population, <span class="at">pattern =</span> <span class="st">&quot;,&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;&quot;</span>)) <span class="co">#convert to numeric</span></span>
<span id="cb102-3"><a href="data-handling.html#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(population) <span class="co">#checks if we scraped the desired data</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Rank"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Country / Dependency"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Percentage of the world"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Date"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Source (official or from the United Nations)"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Notes"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"–","2":"World","3":"7984239000","4":"100%","5":"12 Oct 2022","6":"UN projection[3]","7":""},{"1":"1","2":"China","3":"1412600000","4":"17.7%","5":"31 Dec 2021","6":"Official estimate[4]","7":"The population figure refers to mainland China, excluding its special administrative regions of Hong Kong and Macau, the former of which returned to Chinese sovereignty in 1997 and the latter in 1999."},{"1":"2","2":"India","3":"1375586000","4":"17.2%","5":"1 Mar 2022","6":"Official projection[5]","7":"The figure includes the population of Indian-administered Jammu and Kashmir and Ladakh."},{"1":"3","2":"United States","3":"331893745","4":"4.16%","5":"1 Jul 2021","6":"Official estimate[6]","7":"The figure includes the 50 states and the District of Columbia, but excludes the territories of the United States."},{"1":"4","2":"Indonesia","3":"275773800","4":"3.45%","5":"1 Jul 2022","6":"Official estimate[7]","7":""},{"1":"5","2":"Pakistan","3":"229489000","4":"2.87%","5":"1 Jul 2022","6":"UN projection[3]","7":"The figure includes the population of Pakistan-administered Azad Kashmir and Gilgit-Baltistan."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now the variable is of type “numeric” and could be used for analysis.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data-handling.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(population<span class="sc">$</span>Population)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="scraping-data-from-apis" class="section level4 hasAnchor" number="3.2.5.2">
<h4><span class="header-section-number">3.2.5.2</span> Scraping data from APIs<a href="data-handling.html#scraping-data-from-apis" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="scraping-data-from-apis-directly" class="section level5 hasAnchor" number="3.2.5.2.1">
<h5><span class="header-section-number">3.2.5.2.1</span> Scraping data from APIs directly<a href="data-handling.html#scraping-data-from-apis-directly" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Reading data from websites can be tricky since you need to analyze the page structure first. Many web-services (e.g., Facebook, Twitter, YouTube) actually have application programming interfaces (API’s), which you can use to obtain data in a pre-structured format. JSON (JavaScript Object Notation) is a popular lightweight data-interchange format in which data can be obtained. The process of obtaining data is visualized in the following graphic:</p>
<div class="figure">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/API.JPG" alt="" />
<p class="caption">Obtaining data from APIs</p>
</div>
<p>The process of obtaining data from APIs consists of the following steps:</p>
<ul>
<li>Identify an API that has enough data to be relevant and reliable (e.g., <a href="http://www.programmableweb.com:" target="_blank">www.programmableweb.com</a> has &gt;12,000 open web APIs in 63 categories).</li>
<li>Request information by calling (or, more technically speaking, creating a request to) the API (e.g., R, python, php or JavaScript).</li>
<li>Receive response messages, which is usually in JavaScript Object Notation (JSON) or Extensible Markup Language (XML) format.</li>
<li>Write a parser to pull out the elements you want and put them into a of simpler format</li>
<li>Store, process or analyze data according the marketing research question.</li>
</ul>
<p>Let’s assume that you would like to obtain population data again. The World Bank has an API that allows you to easily obtain this kind of data. The details are usually provided in the API reference, e.g., <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-api-documentation" target="_blank">here</a>. You simply “call” the API for the desired information and get a structured JSON file with the desired key-value pairs in return. For example, the population for Austria from 1960 to 2019 can be obtained using <a href="http://api.worldbank.org/v2/countries/AT/indicators/SP.POP.TOTL/?date=1960:2019&format=json&per_page=100" target="_blank">this call</a>. The file can be easily read into R using the <code>fromJSON()</code>-function from the <code>jsonlite</code>-package. Again, the result is a list and the second element <code>ctrydata[[2]]</code> contains the desired data, from which we select the “value” and “data” columns using the square brackets as usual <code>[,c("value","date")]</code></p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-handling.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb105-2"><a href="data-handling.html#cb105-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;http://api.worldbank.org/v2/countries/AT/indicators/SP.POP.TOTL/?date=1960:2019&amp;format=json&amp;per_page=100&quot;</span> <span class="co">#specifies url</span></span>
<span id="cb105-3"><a href="data-handling.html#cb105-3" aria-hidden="true" tabindex="-1"></a>ctrydata <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(url) <span class="co">#parses the data </span></span>
<span id="cb105-4"><a href="data-handling.html#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ctrydata)</span></code></pre></div>
<pre><code>## List of 2
##  $ :List of 7
##   ..$ page       : int 1
##   ..$ pages      : int 1
##   ..$ per_page   : int 100
##   ..$ total      : int 60
##   ..$ sourceid   : chr &quot;2&quot;
##   ..$ sourcename : chr &quot;World Development Indicators&quot;
##   ..$ lastupdated: chr &quot;2022-09-16&quot;
##  $ :&#39;data.frame&#39;:    60 obs. of  8 variables:
##   ..$ indicator      :&#39;data.frame&#39;:  60 obs. of  2 variables:
##   .. ..$ id   : chr [1:60] &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; ...
##   .. ..$ value: chr [1:60] &quot;Population, total&quot; &quot;Population, total&quot; &quot;Population, total&quot; &quot;Population, total&quot; ...
##   ..$ country        :&#39;data.frame&#39;:  60 obs. of  2 variables:
##   .. ..$ id   : chr [1:60] &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; ...
##   .. ..$ value: chr [1:60] &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; ...
##   ..$ countryiso3code: chr [1:60] &quot;AUT&quot; &quot;AUT&quot; &quot;AUT&quot; &quot;AUT&quot; ...
##   ..$ date           : chr [1:60] &quot;2019&quot; &quot;2018&quot; &quot;2017&quot; &quot;2016&quot; ...
##   ..$ value          : int [1:60] 8879920 8840521 8797566 8736668 8642699 8546356 8479823 8429991 8391643 8363404 ...
##   ..$ unit           : chr [1:60] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##   ..$ obs_status     : chr [1:60] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##   ..$ decimal        : int [1:60] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-handling.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ctrydata[[<span class="dv">2</span>]][,<span class="fu">c</span>(<span class="st">&quot;value&quot;</span>,<span class="st">&quot;date&quot;</span>)]) <span class="co">#checks if we scraped the desired data</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["int"],"align":["right"]},{"label":["date"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"8879920","2":"2019"},{"1":"8840521","2":"2018"},{"1":"8797566","2":"2017"},{"1":"8736668","2":"2016"},{"1":"8642699","2":"2015"},{"1":"8546356","2":"2014"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="scraping-data-from-apis-via-r-packages" class="section level5 hasAnchor" number="3.2.5.2.2">
<h5><span class="header-section-number">3.2.5.2.2</span> Scraping data from APIs via R packages<a href="data-handling.html#scraping-data-from-apis-via-r-packages" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>An even more convenient way to obtain data from web APIs is to use existing R packages that someone else has already created. There are R packages available for various web-services. For example, the <code>gtrendsR</code> package can be used to conveniently obtain data from the <a href="https://trends.google.at/trends/" target="_blank">Google Trends</a> page. The <code>gtrends()</code> function is easy to use and returns a list of elements (e.g., “interest over time”, “interest by city”, “related topics”), which can be inspected using the <code>ls()</code> function. The following example can be used to obtain data for the search term “data science” in the US between September 1 and October 6:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-handling.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtrendsR)</span>
<span id="cb108-2"><a href="data-handling.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co">#specify search term, area, source and time frame</span></span>
<span id="cb108-3"><a href="data-handling.html#cb108-3" aria-hidden="true" tabindex="-1"></a>google_trends <span class="ot">&lt;-</span> <span class="fu">gtrends</span>(<span class="st">&quot;data science&quot;</span>, <span class="at">geo =</span> <span class="fu">c</span>(<span class="st">&quot;US&quot;</span>), <span class="at">gprop =</span> <span class="fu">c</span>(<span class="st">&quot;web&quot;</span>), <span class="at">time =</span> <span class="st">&quot;2012-09-01 2020-10-06&quot;</span>)</span>
<span id="cb108-4"><a href="data-handling.html#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co">#inspect trend over time data frame</span></span>
<span id="cb108-5"><a href="data-handling.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(google_trends<span class="sc">$</span>interest_over_time)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["dttm"],"align":["right"]},{"label":["hits"],"name":[2],"type":["int"],"align":["right"]},{"label":["keyword"],"name":[3],"type":["chr"],"align":["left"]},{"label":["geo"],"name":[4],"type":["chr"],"align":["left"]},{"label":["time"],"name":[5],"type":["chr"],"align":["left"]},{"label":["gprop"],"name":[6],"type":["chr"],"align":["left"]},{"label":["category"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"2012-09-01","2":"17","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2012-10-01","2":"13","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2012-11-01","2":"13","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2012-12-01","2":"10","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2013-01-01","2":"14","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2013-02-01","2":"12","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Although we haven’t covered data visualization yet (see chapter 5), you could also easily plot the data to see the increasing trend for the search term we selected using the <code>plot()</code>-function. Note that the argument <code>type = "b"</code> indicates that <u>b</u>oth - a combination of line and points - should be used.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-handling.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot data</span></span>
<span id="cb109-2"><a href="data-handling.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(google_trends<span class="sc">$</span>interest_over_time[,<span class="fu">c</span>(<span class="st">&quot;date&quot;</span>,<span class="st">&quot;hits&quot;</span>)],<span class="at">type =</span> <span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<p><img src="03-data_import_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Another advantage of R is that it is open to user contributions. This often means that packages that allow users to collect data to investigate timely issues are available fairly quickly. As an example, consider the recent pandemic where many resources were made available via R packages to researchers (see <a href="https://mine-cetinkaya-rundel.github.io/covid19-r/">here</a> for an overview). For example, we might want to get information on the number of daily confirmed cases in the US on the state level. We could obtain this information in just one line of code using the ‘COVID19’ package.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-handling.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(COVID19)</span>
<span id="cb110-2"><a href="data-handling.html#cb110-2" aria-hidden="true" tabindex="-1"></a>covid_data <span class="ot">&lt;-</span> <span class="fu">covid19</span>(<span class="at">country =</span> <span class="st">&quot;US&quot;</span>,<span class="at">level =</span> <span class="dv">2</span>,<span class="at">start =</span> <span class="st">&quot;2020-01-01&quot;</span>)</span></code></pre></div>
<pre><code>## We have invested a lot of time and effort in creating COVID-19 Data Hub, please cite the following when using it:
## 
## To cite package &#39;COVID19&#39; in publications use:
## 
##   Guidotti, E., Ardia, D., (2020), &quot;COVID-19 Data Hub&quot;, Journal of Open
##   Source Software 5(51):2376, doi: 10.21105/joss.02376.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Article{,
##     title = {COVID-19 Data Hub},
##     year = {2020},
##     doi = {10.21105/joss.02376},
##     author = {Emanuele Guidotti and David Ardia},
##     journal = {Journal of Open Source Software},
##     volume = {5},
##     number = {51},
##     pages = {2376},
##   }
## 
## To hide this message use &#39;verbose = FALSE&#39;.</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-handling.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["date"],"align":["right"]},{"label":["confirmed"],"name":[3],"type":["int"],"align":["right"]},{"label":["deaths"],"name":[4],"type":["int"],"align":["right"]},{"label":["recovered"],"name":[5],"type":["int"],"align":["right"]},{"label":["tests"],"name":[6],"type":["int"],"align":["right"]},{"label":["vaccines"],"name":[7],"type":["int"],"align":["right"]},{"label":["people_vaccinated"],"name":[8],"type":["int"],"align":["right"]},{"label":["people_fully_vaccinated"],"name":[9],"type":["int"],"align":["right"]},{"label":["hosp"],"name":[10],"type":["int"],"align":["right"]},{"label":["icu"],"name":[11],"type":["int"],"align":["right"]},{"label":["vent"],"name":[12],"type":["int"],"align":["right"]},{"label":["school_closing"],"name":[13],"type":["int"],"align":["right"]},{"label":["workplace_closing"],"name":[14],"type":["int"],"align":["right"]},{"label":["cancel_events"],"name":[15],"type":["int"],"align":["right"]},{"label":["gatherings_restrictions"],"name":[16],"type":["int"],"align":["right"]},{"label":["transport_closing"],"name":[17],"type":["int"],"align":["right"]},{"label":["stay_home_restrictions"],"name":[18],"type":["int"],"align":["right"]},{"label":["internal_movement_restrictions"],"name":[19],"type":["int"],"align":["right"]},{"label":["international_movement_restrictions"],"name":[20],"type":["int"],"align":["right"]},{"label":["information_campaigns"],"name":[21],"type":["int"],"align":["right"]},{"label":["testing_policy"],"name":[22],"type":["int"],"align":["right"]},{"label":["contact_tracing"],"name":[23],"type":["int"],"align":["right"]},{"label":["facial_coverings"],"name":[24],"type":["int"],"align":["right"]},{"label":["vaccination_policy"],"name":[25],"type":["int"],"align":["right"]},{"label":["elderly_people_protection"],"name":[26],"type":["int"],"align":["right"]},{"label":["government_response_index"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["stringency_index"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["containment_health_index"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["economic_support_index"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["administrative_area_level"],"name":[31],"type":["int"],"align":["right"]},{"label":["administrative_area_level_1"],"name":[32],"type":["chr"],"align":["left"]},{"label":["administrative_area_level_2"],"name":[33],"type":["chr"],"align":["left"]},{"label":["administrative_area_level_3"],"name":[34],"type":["chr"],"align":["left"]},{"label":["latitude"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["longitude"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["population"],"name":[37],"type":["int"],"align":["right"]},{"label":["iso_alpha_3"],"name":[38],"type":["chr"],"align":["left"]},{"label":["iso_alpha_2"],"name":[39],"type":["chr"],"align":["left"]},{"label":["iso_numeric"],"name":[40],"type":["int"],"align":["right"]},{"label":["iso_currency"],"name":[41],"type":["chr"],"align":["left"]},{"label":["key_local"],"name":[42],"type":["chr"],"align":["left"]},{"label":["key_google_mobility"],"name":[43],"type":["chr"],"align":["left"]},{"label":["key_apple_mobility"],"name":[44],"type":["chr"],"align":["left"]},{"label":["key_jhu_csse"],"name":[45],"type":["chr"],"align":["left"]},{"label":["key_nuts"],"name":[46],"type":["lgl"],"align":["right"]},{"label":["key_gadm"],"name":[47],"type":["chr"],"align":["left"]}],"data":[{"1":"10b692cc","2":"2020-03-16","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"2","32":"United States","33":"Northern Mariana Islands","34":"NA","35":"14.15569","36":"145.2119","37":"55144","38":"USA","39":"US","40":"840","41":"USD","42":"69","43":"NA","44":"Northern Mariana Islands","45":"US69","46":"NA","47":"MNP"},{"1":"10b692cc","2":"2020-03-17","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"2","32":"United States","33":"Northern Mariana Islands","34":"NA","35":"14.15569","36":"145.2119","37":"55144","38":"USA","39":"US","40":"840","41":"USD","42":"69","43":"NA","44":"Northern Mariana Islands","45":"US69","46":"NA","47":"MNP"},{"1":"10b692cc","2":"2020-03-18","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"2","32":"United States","33":"Northern Mariana Islands","34":"NA","35":"14.15569","36":"145.2119","37":"55144","38":"USA","39":"US","40":"840","41":"USD","42":"69","43":"NA","44":"Northern Mariana Islands","45":"US69","46":"NA","47":"MNP"},{"1":"10b692cc","2":"2020-03-19","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"2","32":"United States","33":"Northern Mariana Islands","34":"NA","35":"14.15569","36":"145.2119","37":"55144","38":"USA","39":"US","40":"840","41":"USD","42":"69","43":"NA","44":"Northern Mariana Islands","45":"US69","46":"NA","47":"MNP"},{"1":"10b692cc","2":"2020-03-20","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"2","32":"United States","33":"Northern Mariana Islands","34":"NA","35":"14.15569","36":"145.2119","37":"55144","38":"USA","39":"US","40":"840","41":"USD","42":"69","43":"NA","44":"Northern Mariana Islands","45":"US69","46":"NA","47":"MNP"},{"1":"10b692cc","2":"2020-03-21","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"NA","12":"NA","13":"NA","14":"NA","15":"NA","16":"NA","17":"NA","18":"NA","19":"NA","20":"NA","21":"NA","22":"NA","23":"NA","24":"NA","25":"NA","26":"NA","27":"NA","28":"NA","29":"NA","30":"NA","31":"2","32":"United States","33":"Northern Mariana Islands","34":"NA","35":"14.15569","36":"145.2119","37":"55144","38":"USA","39":"US","40":"840","41":"USD","42":"69","43":"NA","44":"Northern Mariana Islands","45":"US69","46":"NA","47":"MNP"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Again, we could plot this data easily. In the following example, we first subset the data to the state of New York and then plot the development over time using the <code>plot()</code>-function. The argument <code>type = "l"</code> indicates that a <u>l</u>ine plot should be produced.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data-handling.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot data</span></span>
<span id="cb113-2"><a href="data-handling.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(covid_data[covid_data<span class="sc">$</span>administrative_area_level_2<span class="sc">==</span><span class="st">&quot;New York&quot;</span>,<span class="fu">c</span>(<span class="st">&quot;date&quot;</span>,<span class="st">&quot;confirmed&quot;</span>)],<span class="at">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="03-data_import_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
</div>
</div>
</div>
<div id="learning-check-1" class="section level2 unnumbered hasAnchor">
<h2>Learning check<a href="data-handling.html#learning-check-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>(LC3.1) Which of the following are data types are recognized by R?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" />Factor</li>
<li><input type="checkbox" disabled="" />Date</li>
<li><input type="checkbox" disabled="" />Decimal</li>
<li><input type="checkbox" disabled="" />Vector</li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.2) What function should you use to check if an object is a data frame?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>type()</code></li>
<li><input type="checkbox" disabled="" /><code>str()</code></li>
<li><input type="checkbox" disabled="" /><code>class()</code></li>
<li><input type="checkbox" disabled="" /><code>object.type()</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.3) You would like to combine three vectors (student, grade, date) in a data frame. What would happen when executing the following code?</strong></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-handling.html#cb114-1" aria-hidden="true" tabindex="-1"></a>student <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;Max&#39;</span>,<span class="st">&#39;Jonas&#39;</span>,<span class="st">&#39;Saskia&#39;</span>,<span class="st">&#39;Victoria&#39;</span>)</span>
<span id="cb114-2"><a href="data-handling.html#cb114-2" aria-hidden="true" tabindex="-1"></a>grade <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb114-3"><a href="data-handling.html#cb114-3" aria-hidden="true" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&#39;2020-10-06&#39;</span>,<span class="st">&#39;2020-10-08&#39;</span>,<span class="st">&#39;2020-10-09&#39;</span>))</span>
<span id="cb114-4"><a href="data-handling.html#cb114-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(student,grade,date)</span></code></pre></div>
<ul class="task-list">
<li><input type="checkbox" disabled="" />Error because a data frame can not have different data types</li>
<li><input type="checkbox" disabled="" />Error because you should use <code>as.data.frame()</code> instead of <code>data.frame()</code></li>
<li><input type="checkbox" disabled="" />Error because all vectors need to have the same length</li>
<li><input type="checkbox" disabled="" />Error because the column names are not specified</li>
<li><input type="checkbox" disabled="" />This code should not report an error</li>
</ul>
<p><strong>You would like to analyze the following data frame</strong></p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["student"],"name":[1],"type":["chr"],"align":["left"]},{"label":["grade"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["country"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Christian","2":"1","3":"AT"},{"1":"Matthias","2":"1","3":"AT"},{"1":"Max","2":"NA","3":"AT"},{"1":"Christina","2":"3","3":"AT"},{"1":"Ines","2":"2","3":"DE"},{"1":"Eddie","2":"1","3":"DE"},{"1":"Janine","2":"2","3":"DE"},{"1":"Victoria","2":"3","3":"SK"},{"1":"Pia","2":"1","3":"US"},{"1":"Julia","2":"2","3":"CA"},{"1":"Lena","2":"3","3":"AT"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><strong>(LC3.4) How can you obtain Christina’s grade from the data frame?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>df[4,2]</code></li>
<li><input type="checkbox" disabled="" /><code>df[2,4]</code></li>
<li><input type="checkbox" disabled="" /><code>filter(df, student = Christina) %&gt;% select(grade)</code></li>
<li><input type="checkbox" disabled="" /><code>filter(df, student == "Christina") %&gt;% select(grade)</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.5) How can you add a new variable ‘student_id’ to the data frame that assigns numbers to students in an ascending order?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>df$student_id &lt;- 1:nrow(df)</code></li>
<li><input type="checkbox" disabled="" /><code>df&amp;student_id &lt;- 1:nrow(df)</code></li>
<li><input type="checkbox" disabled="" /><code>mutate(df, student_id = 1:nrow(df))</code></li>
<li><input type="checkbox" disabled="" /><code>mutate(df, student_id = 1:length(df))</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.6) How could you obtain all rows with students who obtained a 1?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>filter(df, grade == 1)</code></li>
<li><input type="checkbox" disabled="" /><code>filter(df, grade == min(df$grade, na.rm = TRUE))</code></li>
<li><input type="checkbox" disabled="" /><code>select(df, grade == 1)</code></li>
<li><input type="checkbox" disabled="" /><code>filter(df, grade == min(df$grade))</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.7) How could you create a subset of observations where the grade is not missing (NA) </strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>df_subset &lt;- filter(df, !is.na(grade))</code></li>
<li><input type="checkbox" disabled="" /><code>df_subset &lt;- filter(df, isnot.na(grade))</code></li>
<li><input type="checkbox" disabled="" /><code>df_subset &lt;- filter(df, grade != NA)</code></li>
<li><input type="checkbox" disabled="" /><code>df_subset &lt;- filter(df, grade != "NA")</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.8) What is the share of students with a grade better than 3?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>filter(df, grade &lt; 3)/nrow(df)</code></li>
<li><input type="checkbox" disabled="" /><code>nrow(filter(df, grade &lt; 3))/length(df)</code></li>
<li><input type="checkbox" disabled="" /><code>nrow(filter(df, grade &lt; 3))/nrow(df)</code></li>
<li><input type="checkbox" disabled="" /><code>filter(df, grade &lt; 3)/length(df)</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.9) You would like to load a .csv file from your working directory. What function would you use do it?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>read.table(file_name.csv)</code></li>
<li><input type="checkbox" disabled="" /><code>load.csv("file.csv")</code></li>
<li><input type="checkbox" disabled="" /><code>read.table("file.csv")</code></li>
<li><input type="checkbox" disabled="" /><code>get.table(file_name.csv)</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>
<p><strong>(LC3.10) After you loaded the file, you would like to inspect the types of data contained in it. How would you do it?</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" /><code>ncol(df)</code></li>
<li><input type="checkbox" disabled="" /><code>nrow(df)</code></li>
<li><input type="checkbox" disabled="" /><code>dim(df)</code></li>
<li><input type="checkbox" disabled="" /><code>str(df)</code></li>
<li><input type="checkbox" disabled="" />None of the above</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarizing-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
