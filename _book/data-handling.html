<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data handling | Marketing Analytics 2021</title>
  <meta name="description" content="An Introduction to Data Analytics Using R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data handling | Marketing Analytics 2021" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An Introduction to Data Analytics Using R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data handling | Marketing Analytics 2021" />
  
  <meta name="twitter:description" content="An Introduction to Data Analytics Using R" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="getting-started-with-r.html"/>
<link rel="next" href="summarizing-data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">MRDA 2021</a></strong></li>

<li class="divider"></li>
<li class="part"><span><b>I Course outline</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#course-motivation"><i class="fa fa-check"></i>Course motivation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#course-structure"><i class="fa fa-check"></i>Course structure</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#grading"><i class="fa fa-check"></i>Grading</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#course-materials"><i class="fa fa-check"></i>Course materials</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#main-reference"><i class="fa fa-check"></i>Main reference</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#further-readings"><i class="fa fa-check"></i>Further readings</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#discussion-forum"><i class="fa fa-check"></i>Discussion forum</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#datacamp"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#other-web-resources"><i class="fa fa-check"></i>Other web-resources</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#contact"><i class="fa fa-check"></i>Contact</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Lecture notes</b></span></li>
<li class="chapter" data-level="1" data-path="preliminaries.html"><a href="preliminaries.html"><i class="fa fa-check"></i><b>1</b> Preliminaries</a><ul>
<li class="chapter" data-level="1.1" data-path="preliminaries.html"><a href="preliminaries.html#marketing-foundations-recap"><i class="fa fa-check"></i><b>1.1</b> Marketing foundations (recap)</a></li>
<li class="chapter" data-level="1.2" data-path="preliminaries.html"><a href="preliminaries.html#the-research-process"><i class="fa fa-check"></i><b>1.2</b> The research process</a><ul>
<li class="chapter" data-level="1.2.1" data-path="preliminaries.html"><a href="preliminaries.html#research-question-and-hypothesis"><i class="fa fa-check"></i><b>1.2.1</b> Research question and hypothesis</a></li>
<li class="chapter" data-level="1.2.2" data-path="preliminaries.html"><a href="preliminaries.html#choosing-a-research-design"><i class="fa fa-check"></i><b>1.2.2</b> Choosing a research design</a></li>
<li class="chapter" data-level="1.2.3" data-path="preliminaries.html"><a href="preliminaries.html#collecting-data"><i class="fa fa-check"></i><b>1.2.3</b> Collecting data</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#learning-check"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="preliminaries.html"><a href="preliminaries.html#references"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2</b> Getting started with R</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#how-to-download-and-install-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> How to download and install R and RStudio</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#the-r-studio-interface"><i class="fa fa-check"></i><b>2.2</b> The R Studio interface</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#functions"><i class="fa fa-check"></i><b>2.3</b> Functions</a></li>
<li class="chapter" data-level="2.4" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#packages"><i class="fa fa-check"></i><b>2.4</b> Packages</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#a-typical-r-session"><i class="fa fa-check"></i><b>2.5</b> A typical R session</a></li>
<li class="chapter" data-level="2.6" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#getting-help"><i class="fa fa-check"></i><b>2.6</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-handling.html"><a href="data-handling.html"><i class="fa fa-check"></i><b>3</b> Data handling</a><ul>
<li class="chapter" data-level="3.1" data-path="data-handling.html"><a href="data-handling.html#basic-data-handling"><i class="fa fa-check"></i><b>3.1</b> Basic data handling</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-handling.html"><a href="data-handling.html#creating-objects"><i class="fa fa-check"></i><b>3.1.1</b> Creating objects</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-handling.html"><a href="data-handling.html#data-types"><i class="fa fa-check"></i><b>3.1.2</b> Data types</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-handling.html"><a href="data-handling.html#data-structures"><i class="fa fa-check"></i><b>3.1.3</b> Data structures</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-handling.html"><a href="data-handling.html#data-import-and-export"><i class="fa fa-check"></i><b>3.2</b> Data import and export</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-handling.html"><a href="data-handling.html#getting-data-for-this-course"><i class="fa fa-check"></i><b>3.2.1</b> Getting data for this course</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-handling.html"><a href="data-handling.html#import-data-created-by-other-software-packages"><i class="fa fa-check"></i><b>3.2.2</b> Import data created by other software packages</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-handling.html"><a href="data-handling.html#import-data-from-qualtrics"><i class="fa fa-check"></i><b>3.2.3</b> Import data from Qualtrics</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-handling.html"><a href="data-handling.html#export-data"><i class="fa fa-check"></i><b>3.2.4</b> Export data</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-handling.html"><a href="data-handling.html#import-data-from-the-web"><i class="fa fa-check"></i><b>3.2.5</b> Import data from the Web</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-handling.html"><a href="data-handling.html#learning-check-1"><i class="fa fa-check"></i>Learning check</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="summarizing-data.html"><a href="summarizing-data.html"><i class="fa fa-check"></i><b>4</b> Summarizing data</a><ul>
<li class="chapter" data-level="4.1" data-path="summarizing-data.html"><a href="summarizing-data.html#summary-statistics"><i class="fa fa-check"></i><b>4.1</b> Summary statistics</a><ul>
<li class="chapter" data-level="4.1.1" data-path="summarizing-data.html"><a href="summarizing-data.html#categorical-variables"><i class="fa fa-check"></i><b>4.1.1</b> Categorical variables</a></li>
<li class="chapter" data-level="4.1.2" data-path="summarizing-data.html"><a href="summarizing-data.html#continuous-variables"><i class="fa fa-check"></i><b>4.1.2</b> Continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="summarizing-data.html"><a href="summarizing-data.html#data-visualization"><i class="fa fa-check"></i><b>4.2</b> Data visualization</a><ul>
<li class="chapter" data-level="4.2.1" data-path="summarizing-data.html"><a href="summarizing-data.html#categorical-variables-1"><i class="fa fa-check"></i><b>4.2.1</b> Categorical variables</a></li>
<li class="chapter" data-level="4.2.2" data-path="summarizing-data.html"><a href="summarizing-data.html#continuous-variables-1"><i class="fa fa-check"></i><b>4.2.2</b> Continuous variables</a></li>
<li class="chapter" data-level="4.2.3" data-path="summarizing-data.html"><a href="summarizing-data.html#saving-plots"><i class="fa fa-check"></i><b>4.2.3</b> Saving plots</a></li>
<li class="chapter" data-level="4.2.4" data-path="summarizing-data.html"><a href="summarizing-data.html#ggplot-extensions"><i class="fa fa-check"></i><b>4.2.4</b> ggplot extensions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summarizing-data.html"><a href="summarizing-data.html#learning-check-2"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="summarizing-data.html"><a href="summarizing-data.html#references-1"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistical-inference.html"><a href="statistical-inference.html"><i class="fa fa-check"></i><b>5</b> Statistical inference</a><ul>
<li class="chapter" data-level="5.1" data-path="statistical-inference.html"><a href="statistical-inference.html#if-we-knew-it-all"><i class="fa fa-check"></i><b>5.1</b> If we knew it all</a><ul>
<li class="chapter" data-level="5.1.1" data-path="statistical-inference.html"><a href="statistical-inference.html#sampling-from-a-known-population"><i class="fa fa-check"></i><b>5.1.1</b> Sampling from a known population</a></li>
<li class="chapter" data-level="5.1.2" data-path="statistical-inference.html"><a href="statistical-inference.html#standard-error-of-the-mean"><i class="fa fa-check"></i><b>5.1.2</b> Standard error of the mean</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="statistical-inference.html"><a href="statistical-inference.html#the-central-limit-theorem"><i class="fa fa-check"></i><b>5.2</b> The Central Limit Theorem</a></li>
<li class="chapter" data-level="5.3" data-path="statistical-inference.html"><a href="statistical-inference.html#using-what-we-actually-know"><i class="fa fa-check"></i><b>5.3</b> Using what we actually know</a></li>
<li class="chapter" data-level="5.4" data-path="statistical-inference.html"><a href="statistical-inference.html#confidence-intervals-for-the-sample-mean"><i class="fa fa-check"></i><b>5.4</b> Confidence Intervals for the Sample Mean</a></li>
<li class="chapter" data-level="" data-path="statistical-inference.html"><a href="statistical-inference.html#learning-check-3"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="statistical-inference.html"><a href="statistical-inference.html#references-2"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html"><i class="fa fa-check"></i><b>6</b> Hypothesis testing</a><ul>
<li class="chapter" data-level="6.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction-1"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="6.1.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#the-null-hypothesis"><i class="fa fa-check"></i><b>6.1.1</b> The null hypothesis</a></li>
<li class="chapter" data-level="6.1.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#statistical-inference-on-a-sample"><i class="fa fa-check"></i><b>6.1.2</b> Statistical inference on a sample</a></li>
<li class="chapter" data-level="6.1.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#choosing-the-right-test"><i class="fa fa-check"></i><b>6.1.3</b> Choosing the right test</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-sample-t-test"><i class="fa fa-check"></i><b>6.2</b> One sample t-test</a></li>
<li class="chapter" data-level="6.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#comparing-two-means"><i class="fa fa-check"></i><b>6.3</b> Comparing two means</a><ul>
<li class="chapter" data-level="6.3.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#independent-means-t-test"><i class="fa fa-check"></i><b>6.3.1</b> Independent-means t-test</a></li>
<li class="chapter" data-level="6.3.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#dependent-means-t-test"><i class="fa fa-check"></i><b>6.3.2</b> Dependent-means t-test</a></li>
<li class="chapter" data-level="6.3.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#further-considerations"><i class="fa fa-check"></i><b>6.3.3</b> Further considerations</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#comparing-several-means"><i class="fa fa-check"></i><b>6.4</b> Comparing several means</a><ul>
<li class="chapter" data-level="6.4.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#introduction-2"><i class="fa fa-check"></i><b>6.4.1</b> Introduction</a></li>
<li class="chapter" data-level="6.4.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#decomposing-variance"><i class="fa fa-check"></i><b>6.4.2</b> Decomposing variance</a></li>
<li class="chapter" data-level="6.4.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#one-way-anova"><i class="fa fa-check"></i><b>6.4.3</b> One-way ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#non-parametric-tests"><i class="fa fa-check"></i><b>6.5</b> Non-parametric tests</a><ul>
<li class="chapter" data-level="6.5.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#mann-whitney-u-test-a.k.a.-wilcoxon-rank-sum-test"><i class="fa fa-check"></i><b>6.5.1</b> Mann-Whitney U Test (a.k.a. Wilcoxon rank-sum test)</a></li>
<li class="chapter" data-level="6.5.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#wilcoxon-signed-rank-test"><i class="fa fa-check"></i><b>6.5.2</b> Wilcoxon signed-rank test</a></li>
<li class="chapter" data-level="6.5.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#kruskal-wallis-test"><i class="fa fa-check"></i><b>6.5.3</b> Kruskal-Wallis test</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#categorical-data"><i class="fa fa-check"></i><b>6.6</b> Categorical data</a><ul>
<li class="chapter" data-level="6.6.1" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#confidence-intervals-for-proportions"><i class="fa fa-check"></i><b>6.6.1</b> Confidence intervals for proportions</a></li>
<li class="chapter" data-level="6.6.2" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#chi-square-test"><i class="fa fa-check"></i><b>6.6.2</b> Chi-square test</a></li>
<li class="chapter" data-level="6.6.3" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#sample-size-1"><i class="fa fa-check"></i><b>6.6.3</b> Sample size</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#learning-check-4"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="hypothesis-testing.html"><a href="hypothesis-testing.html#references-3"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>7</b> Regression</a><ul>
<li class="chapter" data-level="7.1" data-path="regression.html"><a href="regression.html#correlation"><i class="fa fa-check"></i><b>7.1</b> Correlation</a><ul>
<li class="chapter" data-level="7.1.1" data-path="regression.html"><a href="regression.html#correlation-coefficient"><i class="fa fa-check"></i><b>7.1.1</b> Correlation coefficient</a></li>
<li class="chapter" data-level="7.1.2" data-path="regression.html"><a href="regression.html#significance-testing"><i class="fa fa-check"></i><b>7.1.2</b> Significance testing</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="regression.html"><a href="regression.html#regression-1"><i class="fa fa-check"></i><b>7.2</b> Regression</a><ul>
<li class="chapter" data-level="7.2.1" data-path="regression.html"><a href="regression.html#simple-linear-regression"><i class="fa fa-check"></i><b>7.2.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="7.2.2" data-path="regression.html"><a href="regression.html#multiple-linear-regression"><i class="fa fa-check"></i><b>7.2.2</b> Multiple linear regression</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="regression.html"><a href="regression.html#potential-problems"><i class="fa fa-check"></i><b>7.3</b> Potential problems</a><ul>
<li class="chapter" data-level="7.3.1" data-path="regression.html"><a href="regression.html#outliers"><i class="fa fa-check"></i><b>7.3.1</b> Outliers</a></li>
<li class="chapter" data-level="7.3.2" data-path="regression.html"><a href="regression.html#influential-observations"><i class="fa fa-check"></i><b>7.3.2</b> Influential observations</a></li>
<li class="chapter" data-level="7.3.3" data-path="regression.html"><a href="regression.html#non-linearity"><i class="fa fa-check"></i><b>7.3.3</b> Non-linearity</a></li>
<li class="chapter" data-level="7.3.4" data-path="regression.html"><a href="regression.html#non-constant-error-variance"><i class="fa fa-check"></i><b>7.3.4</b> Non-constant error variance</a></li>
<li class="chapter" data-level="7.3.5" data-path="regression.html"><a href="regression.html#non-normally-distributed-errors"><i class="fa fa-check"></i><b>7.3.5</b> Non-normally distributed errors</a></li>
<li class="chapter" data-level="7.3.6" data-path="regression.html"><a href="regression.html#correlation-of-errors"><i class="fa fa-check"></i><b>7.3.6</b> Correlation of errors</a></li>
<li class="chapter" data-level="7.3.7" data-path="regression.html"><a href="regression.html#collinearity"><i class="fa fa-check"></i><b>7.3.7</b> Collinearity</a></li>
<li class="chapter" data-level="7.3.8" data-path="regression.html"><a href="regression.html#omitted-variables"><i class="fa fa-check"></i><b>7.3.8</b> Omitted Variables</a></li>
<li class="chapter" data-level="7.3.9" data-path="regression.html"><a href="regression.html#overfitting"><i class="fa fa-check"></i><b>7.3.9</b> Overfitting</a></li>
<li class="chapter" data-level="7.3.10" data-path="regression.html"><a href="regression.html#variable-selection"><i class="fa fa-check"></i><b>7.3.10</b> Variable selection</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="regression.html"><a href="regression.html#categorical-predictors"><i class="fa fa-check"></i><b>7.4</b> Categorical predictors</a><ul>
<li class="chapter" data-level="7.4.1" data-path="regression.html"><a href="regression.html#two-categories"><i class="fa fa-check"></i><b>7.4.1</b> Two categories</a></li>
<li class="chapter" data-level="7.4.2" data-path="regression.html"><a href="regression.html#more-than-two-categories"><i class="fa fa-check"></i><b>7.4.2</b> More than two categories</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="regression.html"><a href="regression.html#extensions-of-the-linear-model"><i class="fa fa-check"></i><b>7.5</b> Extensions of the linear model</a><ul>
<li class="chapter" data-level="7.5.1" data-path="regression.html"><a href="regression.html#interaction-effects"><i class="fa fa-check"></i><b>7.5.1</b> Interaction effects</a></li>
<li class="chapter" data-level="7.5.2" data-path="regression.html"><a href="regression.html#non-linear-relationships"><i class="fa fa-check"></i><b>7.5.2</b> Non-linear relationships</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="regression.html"><a href="regression.html#logistic-regression"><i class="fa fa-check"></i><b>7.6</b> Logistic regression</a><ul>
<li class="chapter" data-level="7.6.1" data-path="regression.html"><a href="regression.html#motivation-and-intuition"><i class="fa fa-check"></i><b>7.6.1</b> Motivation and intuition</a></li>
<li class="chapter" data-level="7.6.2" data-path="regression.html"><a href="regression.html#technical-details-of-the-model"><i class="fa fa-check"></i><b>7.6.2</b> Technical details of the model</a></li>
<li class="chapter" data-level="7.6.3" data-path="regression.html"><a href="regression.html#estimation-in-r"><i class="fa fa-check"></i><b>7.6.3</b> Estimation in R</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="regression.html"><a href="regression.html#learning-check-5"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="regression.html"><a href="regression.html#references-4"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html"><i class="fa fa-check"></i><b>8</b> Exploratory factor analysis</a><ul>
<li class="chapter" data-level="8.1" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#introduction-3"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#steps-in-factor-analysis"><i class="fa fa-check"></i><b>8.2</b> Steps in factor analysis</a><ul>
<li class="chapter" data-level="8.2.1" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#are-the-assumptions-satisfied"><i class="fa fa-check"></i><b>8.2.1</b> Are the assumptions satisfied?</a></li>
<li class="chapter" data-level="8.2.2" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#deriving-factors"><i class="fa fa-check"></i><b>8.2.2</b> Deriving factors</a></li>
<li class="chapter" data-level="8.2.3" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#factor-interpretation"><i class="fa fa-check"></i><b>8.2.3</b> Factor interpretation</a></li>
<li class="chapter" data-level="8.2.4" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#creating-new-variables"><i class="fa fa-check"></i><b>8.2.4</b> Creating new variables</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#reliability-analysis"><i class="fa fa-check"></i><b>8.3</b> Reliability analysis</a></li>
<li class="chapter" data-level="" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#learning-check-6"><i class="fa fa-check"></i>Learning check</a></li>
<li class="chapter" data-level="" data-path="exploratory-factor-analysis.html"><a href="exploratory-factor-analysis.html#references-5"><i class="fa fa-check"></i>References</a></li>
</ul></li>
<li class="part"><span><b>III Assignments</b></span></li>
<li class="chapter" data-level="9" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>9</b> R Markdown</a><ul>
<li class="chapter" data-level="9.1" data-path="r-markdown.html"><a href="r-markdown.html#introduction-to-r-markdown"><i class="fa fa-check"></i><b>9.1</b> Introduction to R Markdown</a><ul>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#creating-a-new-r-markdown-document"><i class="fa fa-check"></i>Creating a new R Markdown document</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#text-and-equations"><i class="fa fa-check"></i>Text and Equations</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#r-code"><i class="fa fa-check"></i>R-Code</a></li>
<li class="chapter" data-level="" data-path="r-markdown.html"><a href="r-markdown.html#latex-math"><i class="fa fa-check"></i>LaTeX Math</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Group project</b></span></li>
<li class="chapter" data-level="10" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html"><i class="fa fa-check"></i><b>10</b> Survey design &amp; analysis</a><ul>
<li class="chapter" data-level="10.1" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#your-tasks"><i class="fa fa-check"></i><b>10.1</b> Your tasks</a><ul>
<li class="chapter" data-level="10.1.1" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#topics-for-the-group-project"><i class="fa fa-check"></i><b>10.1.1</b> Topics for the group project</a></li>
<li class="chapter" data-level="10.1.2" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#guidelines"><i class="fa fa-check"></i><b>10.1.2</b> Guidelines</a></li>
<li class="chapter" data-level="10.1.3" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#timeline"><i class="fa fa-check"></i><b>10.1.3</b> Timeline</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#part-1-before-collecting-data"><i class="fa fa-check"></i><b>10.2</b> Part 1: Before collecting data</a><ul>
<li class="chapter" data-level="10.2.1" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#research-design"><i class="fa fa-check"></i><b>10.2.1</b> Research design</a></li>
<li class="chapter" data-level="10.2.2" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#survey-method"><i class="fa fa-check"></i><b>10.2.2</b> Survey method</a></li>
<li class="chapter" data-level="10.2.3" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#questionnaire"><i class="fa fa-check"></i><b>10.2.3</b> Questionnaire</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#part-2-data-collection-and-analysis"><i class="fa fa-check"></i><b>10.3</b> Part 2: Data collection and analysis</a><ul>
<li class="chapter" data-level="10.3.1" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#collecting-data-1"><i class="fa fa-check"></i><b>10.3.1</b> Collecting data</a></li>
<li class="chapter" data-level="10.3.2" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#data-analysis"><i class="fa fa-check"></i><b>10.3.2</b> Data analysis</a></li>
<li class="chapter" data-level="10.3.3" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#reporting"><i class="fa fa-check"></i><b>10.3.3</b> Reporting</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#frequently-asked-questions"><i class="fa fa-check"></i><b>10.4</b> Frequently asked questions</a><ul>
<li class="chapter" data-level="10.4.1" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#multiple-answers-stored-in-one-cell-in-csv"><i class="fa fa-check"></i><b>10.4.1</b> Multiple answers stored in one cell in CSV</a></li>
<li class="chapter" data-level="10.4.2" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#labels-for-numeric-values-in-csv-output"><i class="fa fa-check"></i><b>10.4.2</b> Labels for numeric values in CSV output</a></li>
<li class="chapter" data-level="10.4.3" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#bar-chart-for-multiple-choice-question-with-multiple-answers"><i class="fa fa-check"></i><b>10.4.3</b> Bar chart for multiple choice question with multiple answers</a></li>
<li class="chapter" data-level="10.4.4" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#how-to-create-a-radar-plot"><i class="fa fa-check"></i><b>10.4.4</b> How to create a radar plot?</a></li>
<li class="chapter" data-level="10.4.5" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#vertical-likert-line-chart"><i class="fa fa-check"></i><b>10.4.5</b> Vertical Likert line chart</a></li>
<li class="chapter" data-level="10.4.6" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#diverging-stacked-barchart"><i class="fa fa-check"></i><b>10.4.6</b> Diverging stacked barchart</a></li>
<li class="chapter" data-level="10.4.7" data-path="survey-design-analysis.html"><a href="survey-design-analysis.html#collapserecode-categories"><i class="fa fa-check"></i><b>10.4.7</b> Collapse/recode categories</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Marketing Analytics 2021</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-handling" class="section level1">
<h1><span class="header-section-number">3</span> Data handling</h1>
<p>This chapter covers the basics of data handling in R.</p>
<div id="basic-data-handling" class="section level2">
<h2><span class="header-section-number">3.1</span> Basic data handling</h2>
<div class="infobox download">
<p><a href="./Code/01-basic_data_handling.R">You can download the corresponding R-Code here</a></p>
</div>
<br>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/Q7AdksOeawU" frameborder="0" allowfullscreen>
</iframe>
</div>
<p><br></p>
<div id="creating-objects" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Creating objects</h3>
<p>Anything created in R is an object. You can assign values to objects using the assignment operator <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-handling.html#cb10-1"></a>x &lt;-<span class="st"> &quot;hello world&quot;</span>  <span class="co">#assigns the words &#39;hello world&#39; to the object x</span></span>
<span id="cb10-2"><a href="data-handling.html#cb10-2"></a><span class="co"># this is a comment</span></span></code></pre></div>
<p>Note that comments may be included in the code after a <code>#</code>. The text after <code>#</code> is not evaluated when the code is run; they can be written directly after the code or in a separate line.</p>
<p>To see the value of an object, simply type its name into the console and hit enter:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-handling.html#cb11-1"></a>x  <span class="co">#print the value of x to the console</span></span></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>You can also explicitly tell R to print the value of an object:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-handling.html#cb13-1"></a><span class="kw">print</span>(x)  <span class="co">#print the value of x to the console</span></span></code></pre></div>
<pre><code>## [1] &quot;hello world&quot;</code></pre>
<p>Note that because we assign characters in this case (as opposed to e.g., numeric values), we need to wrap the words in quotation marks, which must always come in pairs. Although RStudio automatically adds a pair of quotation marks (i.e., opening and closing marks) when you enter the opening marks it could be that you end up with a mismatch by accident (e.g., <code>x &lt;- "hello</code>). In this case, R will show you the continuation character “+”. The same could happen if you did not execute the full command by accident. The “+” means that R is expecting more input. If this happens, either add the missing pair, or press ESCAPE to abort the expression and try again.</p>
<p>To change the value of an object, you can simply overwrite the previous value. For example, you could also assign a numeric value to “x” to perform some basic operations:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-handling.html#cb15-1"></a>x &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co">#assigns the value of 2 to the object x</span></span>
<span id="cb15-2"><a href="data-handling.html#cb15-2"></a><span class="kw">print</span>(x)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-handling.html#cb17-1"></a>x <span class="op">==</span><span class="st"> </span><span class="dv">2</span>  <span class="co">#checks whether the value of x is equal to 2</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-handling.html#cb19-1"></a>x <span class="op">!=</span><span class="st"> </span><span class="dv">3</span>  <span class="co">#checks whether the value of x is NOT equal to 3</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-handling.html#cb21-1"></a>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>  <span class="co">#checks whether the value of x is less than 3</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-handling.html#cb23-1"></a>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>  <span class="co">#checks whether the value of x is greater than 3</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Note that the name of the object is completely arbitrary. We could also define a second object “y”, assign it a different value and use it to perform some basic mathematical operations:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-handling.html#cb25-1"></a>y &lt;-<span class="st"> </span><span class="dv">5</span>  <span class="co">#assigns the value of 2 to the object x</span></span>
<span id="cb25-2"><a href="data-handling.html#cb25-2"></a>x <span class="op">==</span><span class="st"> </span>y  <span class="co">#checks whether the value of x to the value of y</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-handling.html#cb27-1"></a>x <span class="op">*</span><span class="st"> </span>y  <span class="co">#multiplication of x and y</span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-handling.html#cb29-1"></a>x <span class="op">+</span><span class="st"> </span>y  <span class="co">#adds the values of x and y together</span></span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data-handling.html#cb31-1"></a>y<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span> <span class="op">*</span><span class="st"> </span>x  <span class="co">#adds the value of y squared and 3x the value of x together</span></span></code></pre></div>
<pre><code>## [1] 31</code></pre>
<p><b>Object names</b></p>
<p>Please note that object names must start with a letter and can only contain letters, numbers, as well as the <code>.</code>, and <code>_</code> separators. It is important to give your objects descriptive names and to be as consistent as possible with the naming structure. In this tutorial we will be using lower case words separated by underscores (e.g., <code>object_name</code>). There are other naming conventions, such as using a <code>.</code> as a separator (e.g., <code>object.name</code>), or using upper case letters (<code>objectName</code>). It doesn’t really matter which one you choose, as long as you are consistent.</p>
</div>
<div id="data-types" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Data types</h3>
<p>The most important types of data are:</p>
<table>
<colgroup>
<col width="14%" />
<col width="85%" />
</colgroup>
<thead>
<tr class="header">
<th>Data type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Numeric</td>
<td>Approximations of the real numbers, <span class="math inline">\(\normalsize\mathbb{R}\)</span> (e.g., mileage a car gets: 23.6, 20.9, etc.)</td>
</tr>
<tr class="even">
<td>Integer</td>
<td>Whole numbers, <span class="math inline">\(\normalsize\mathbb{Z}\)</span> (e.g., number of sales: 7, 0, 120, 63, etc.)</td>
</tr>
<tr class="odd">
<td>Character</td>
<td>Text data (strings, e.g., product names)</td>
</tr>
<tr class="even">
<td>Factor</td>
<td>Categorical data for classification (e.g., product groups)</td>
</tr>
<tr class="odd">
<td>Logical</td>
<td>TRUE, FALSE</td>
</tr>
<tr class="even">
<td>Date</td>
<td>Date variables (e.g., sales dates: 21-06-2015, 06-21-15, 21-Jun-2015, etc.)</td>
</tr>
</tbody>
</table>
<p>Variables can be converted from one type to another using the appropriate functions (e.g., <code>as.numeric()</code>,<code>as.integer()</code>,<code>as.character()</code>, <code>as.factor()</code>,<code>as.logical()</code>, <code>as.Date()</code>). For example, we could convert the object <code>y</code> to character as follows:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-handling.html#cb33-1"></a>y &lt;-<span class="st"> </span><span class="kw">as.character</span>(y)</span>
<span id="cb33-2"><a href="data-handling.html#cb33-2"></a><span class="kw">print</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;5&quot;</code></pre>
<p>Notice how the value is in quotation marks since it is now of type character.</p>
<p>Entering a vector of data into R can be done with the <code>c(x1,x2,..,x_n)</code> (“concatenate”) command. In order to be able to use our vector (or any other variable) later on we want to assign it a name using the assignment operator <code>&lt;-</code>. You can choose names arbitrarily (but the first character of a name cannot be a number). Just make sure they are descriptive and unique. Assigning the same name to two variables (e.g. vectors) will result in deletion of the first. Instead of converting a variable we can also create a new one and use an existing one as input. In this case we omit the <code>as.</code> and simply use the name of the type (e.g. <code>factor()</code>). There is a subtle difference between the two: When converting a variable, with e.g. <code>as.factor()</code>, we can only pass the variable we want to convert without additional arguments and R determines the factor levels by the existing unique values in the variable or just returns the variable itself if it is a factor already. When we specifically create a variable (just <code>factor()</code>, <code>matrix()</code>, etc.), we can and should set the options of this type explicitly. For a factor variable these could be the labels and levels, for a matrix the number of rows and columns and so on.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data-handling.html#cb35-1"></a><span class="co"># Numeric:</span></span>
<span id="cb35-2"><a href="data-handling.html#cb35-2"></a>top10_track_streams &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">163608</span>, <span class="dv">126687</span>, <span class="dv">120480</span>, <span class="dv">110022</span>, </span>
<span id="cb35-3"><a href="data-handling.html#cb35-3"></a>    <span class="dv">108630</span>, <span class="dv">95639</span>, <span class="dv">94690</span>, <span class="dv">89011</span>, <span class="dv">87869</span>, <span class="dv">85599</span>)</span>
<span id="cb35-4"><a href="data-handling.html#cb35-4"></a></span>
<span id="cb35-5"><a href="data-handling.html#cb35-5"></a><span class="co"># Character:</span></span>
<span id="cb35-6"><a href="data-handling.html#cb35-6"></a>top10_artist_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Axwell /</span><span class="ch">\\</span><span class="st"> Ingrosso&quot;</span>, <span class="st">&quot;Imagine Dragons&quot;</span>, </span>
<span id="cb35-7"><a href="data-handling.html#cb35-7"></a>    <span class="st">&quot;J. Balvin&quot;</span>, <span class="st">&quot;Robin Schulz&quot;</span>, <span class="st">&quot;Jonas Blue&quot;</span>, <span class="st">&quot;David Guetta&quot;</span>, </span>
<span id="cb35-8"><a href="data-handling.html#cb35-8"></a>    <span class="st">&quot;French Montana&quot;</span>, <span class="st">&quot;Calvin Harris&quot;</span>, <span class="st">&quot;Liam Payne&quot;</span>, </span>
<span id="cb35-9"><a href="data-handling.html#cb35-9"></a>    <span class="st">&quot;Lauv&quot;</span>)  <span class="co"># Characters have to be put in &#39;&#39;</span></span>
<span id="cb35-10"><a href="data-handling.html#cb35-10"></a></span>
<span id="cb35-11"><a href="data-handling.html#cb35-11"></a><span class="co"># Factor variable with two categories:</span></span>
<span id="cb35-12"><a href="data-handling.html#cb35-12"></a>top10_track_explicit &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, </span>
<span id="cb35-13"><a href="data-handling.html#cb35-13"></a>    <span class="dv">0</span>)</span>
<span id="cb35-14"><a href="data-handling.html#cb35-14"></a>top10_track_explicit &lt;-<span class="st"> </span><span class="kw">factor</span>(top10_track_explicit, </span>
<span id="cb35-15"><a href="data-handling.html#cb35-15"></a>    <span class="dt">levels =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;not explicit&quot;</span>, <span class="st">&quot;explicit&quot;</span>))</span>
<span id="cb35-16"><a href="data-handling.html#cb35-16"></a></span>
<span id="cb35-17"><a href="data-handling.html#cb35-17"></a><span class="co"># Factor variable with more than two categories:</span></span>
<span id="cb35-18"><a href="data-handling.html#cb35-18"></a>top10_artist_genre &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Alternative&quot;</span>, <span class="st">&quot;Latino&quot;</span>, </span>
<span id="cb35-19"><a href="data-handling.html#cb35-19"></a>    <span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Dance&quot;</span>, <span class="st">&quot;Hip-Hop/Rap&quot;</span>, <span class="st">&quot;Dance&quot;</span>, </span>
<span id="cb35-20"><a href="data-handling.html#cb35-20"></a>    <span class="st">&quot;Pop&quot;</span>, <span class="st">&quot;Pop&quot;</span>)</span>
<span id="cb35-21"><a href="data-handling.html#cb35-21"></a>top10_artist_genre &lt;-<span class="st"> </span><span class="kw">as.factor</span>(top10_artist_genre)</span>
<span id="cb35-22"><a href="data-handling.html#cb35-22"></a></span>
<span id="cb35-23"><a href="data-handling.html#cb35-23"></a><span class="co"># Date:</span></span>
<span id="cb35-24"><a href="data-handling.html#cb35-24"></a>top_<span class="dv">10</span>_track_release_date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">c</span>(<span class="st">&quot;2017-05-24&quot;</span>, </span>
<span id="cb35-25"><a href="data-handling.html#cb35-25"></a>    <span class="st">&quot;2017-06-23&quot;</span>, <span class="st">&quot;2017-07-03&quot;</span>, <span class="st">&quot;2017-06-30&quot;</span>, <span class="st">&quot;2017-05-05&quot;</span>, </span>
<span id="cb35-26"><a href="data-handling.html#cb35-26"></a>    <span class="st">&quot;2017-06-09&quot;</span>, <span class="st">&quot;2017-07-14&quot;</span>, <span class="st">&quot;2017-06-16&quot;</span>, <span class="st">&quot;2017-05-18&quot;</span>, </span>
<span id="cb35-27"><a href="data-handling.html#cb35-27"></a>    <span class="st">&quot;2017-05-19&quot;</span>))</span>
<span id="cb35-28"><a href="data-handling.html#cb35-28"></a></span>
<span id="cb35-29"><a href="data-handling.html#cb35-29"></a><span class="co"># Logical</span></span>
<span id="cb35-30"><a href="data-handling.html#cb35-30"></a>top10_track_explicit_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, </span>
<span id="cb35-31"><a href="data-handling.html#cb35-31"></a>    <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)</span></code></pre></div>
<p>In order to “call” a vector we can now simply enter its name:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-handling.html#cb36-1"></a>top10_track_streams</span></code></pre></div>
<pre><code>##  [1] 163608 126687 120480 110022 108630  95639  94690  89011  87869  85599</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-handling.html#cb38-1"></a>top_<span class="dv">10</span>_track_release_date</span></code></pre></div>
<pre><code>##  [1] &quot;2017-05-24&quot; &quot;2017-06-23&quot; &quot;2017-07-03&quot; &quot;2017-06-30&quot; &quot;2017-05-05&quot;
##  [6] &quot;2017-06-09&quot; &quot;2017-07-14&quot; &quot;2017-06-16&quot; &quot;2017-05-18&quot; &quot;2017-05-19&quot;</code></pre>
<p>In order to check the type of a variable the <code>class()</code> function is used.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-handling.html#cb40-1"></a><span class="kw">class</span>(top_<span class="dv">10</span>_track_release_date)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
</div>
<div id="data-structures" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Data structures</h3>
<p>Now let’s create a table that contains the variables in columns and each observation in a row (like in SPSS or Excel). There are different data structures in R (e.g., Matrix, Vector, List, Array). In this course, we will mainly use <b>data frames</b>.</p>
<p style="text-align:center;">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/dataframe.JPG" alt="data types" height="320">
</p>
<p>Data frames are similar to matrices but are more flexible in the sense that they may contain different data types (e.g., numeric, character, etc.), where all values of vectors and matrices have to be of the same type (e.g. character). It is often more convenient to use characters instead of numbers (e.g. when indicating a persons sex: “F”, “M” instead of 1 for female , 2 for male). Thus we would like to combine both numeric and character values while retaining the respective desired features. This is where “data frames” come into play. Data frames can have different types of data in each column. For example, we can combine the vectors created above in one data frame using <code>data.frame()</code>. This creates a separate column for each vector, which is usually what we want (similar to SPSS or Excel).</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-handling.html#cb42-1"></a>music_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(top10_track_streams, top10_artist_names, </span>
<span id="cb42-2"><a href="data-handling.html#cb42-2"></a>    top10_track_explicit, top10_artist_genre, top_<span class="dv">10</span>_track_release_date, </span>
<span id="cb42-3"><a href="data-handling.html#cb42-3"></a>    top10_track_explicit_<span class="dv">1</span>)</span></code></pre></div>
<div id="accessing-data-in-data-frames" class="section level4">
<h4><span class="header-section-number">3.1.3.1</span> Accessing data in data frames</h4>
<p>When entering the name of a data frame, R returns the entire data frame:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-handling.html#cb43-1"></a>music_data  <span class="co"># Returns the entire data frame</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Hint: You may also use the <code>View()</code>-function to view the data in a table format (like in SPSS or Excel), i.e. enter the command <code>View(data)</code>. Note that you can achieve the same by clicking on the small table icon next to the data frame in the “Environment”-window on the right in RStudio.</p>
<p>Sometimes it is convenient to return only specific values instead of the entire data frame. There are a variety of ways to identify the elements of a data frame. One easy way is to explicitly state, which rows and columns you wish to view. The general form of the command is <code>data.frame[rows,columns]</code>. By leaving one of the arguments of <code>data.frame[rows,columns]</code> blank (e.g., <code>data.frame[rows,]</code>) we tell R that we want to access either all rows or columns, respectively. Here are some examples:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-handling.html#cb44-1"></a>music_data[, <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>]  <span class="co"># all rows and columns 2,3,4</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[2],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[3],"type":["fct"],"align":["left"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"not explicit","3":"Dance"},{"1":"Imagine Dragons","2":"not explicit","3":"Alternative"},{"1":"J. Balvin","2":"not explicit","3":"Latino"},{"1":"Robin Schulz","2":"not explicit","3":"Dance"},{"1":"Jonas Blue","2":"not explicit","3":"Dance"},{"1":"David Guetta","2":"not explicit","3":"Dance"},{"1":"French Montana","2":"explicit","3":"Hip-Hop/Rap"},{"1":"Calvin Harris","2":"explicit","3":"Dance"},{"1":"Liam Payne","2":"not explicit","3":"Pop"},{"1":"Lauv","2":"not explicit","3":"Pop"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-handling.html#cb45-1"></a>music_data[, <span class="kw">c</span>(<span class="st">&quot;top10_artist_names&quot;</span>, <span class="st">&quot;top_10_track_release_date&quot;</span>)]  <span class="co"># all rows and columns &#39;top10_artist_names&#39; and &#39;top_10_track_release_date&#39;</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["chr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[2],"type":["date"],"align":["right"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"2017-05-24"},{"1":"Imagine Dragons","2":"2017-06-23"},{"1":"J. Balvin","2":"2017-07-03"},{"1":"Robin Schulz","2":"2017-06-30"},{"1":"Jonas Blue","2":"2017-05-05"},{"1":"David Guetta","2":"2017-06-09"},{"1":"French Montana","2":"2017-07-14"},{"1":"Calvin Harris","2":"2017-06-16"},{"1":"Liam Payne","2":"2017-05-18"},{"1":"Lauv","2":"2017-05-19"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-handling.html#cb46-1"></a>music_data[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="kw">c</span>(<span class="st">&quot;top10_artist_names&quot;</span>, <span class="st">&quot;top_10_track_release_date&quot;</span>)]  <span class="co"># rows 1 to 5 and columns &#39;top10_artist_names&#39;&#39; and &#39;top_10_track_release_date&#39;</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_artist_names"],"name":[1],"type":["chr"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[2],"type":["date"],"align":["right"]}],"data":[{"1":"Axwell /\\\\ Ingrosso","2":"2017-05-24"},{"1":"Imagine Dragons","2":"2017-06-23"},{"1":"J. Balvin","2":"2017-07-03"},{"1":"Robin Schulz","2":"2017-06-30"},{"1":"Jonas Blue","2":"2017-05-05"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You may also create subsets of the data frame, e.g., using mathematical expressions:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data-handling.html#cb47-1"></a>music_data[top10_track_explicit <span class="op">==</span><span class="st"> &quot;explicit&quot;</span>, ]  <span class="co"># show only tracks with explicit lyrics  </span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-handling.html#cb48-1"></a>music_data[top10_track_streams <span class="op">&gt;</span><span class="st"> </span><span class="fl">1e+05</span>, ]  <span class="co"># show only tracks with more than 100,000 streams  </span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-handling.html#cb49-1"></a>music_data[top10_artist_names <span class="op">==</span><span class="st"> &quot;Robin Schulz&quot;</span>, ]  <span class="co"># returns all observations from artist &#39;Robin Schulz&#39;</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-handling.html#cb50-1"></a>music_data[top10_track_explicit <span class="op">==</span><span class="st"> &quot;explicit&quot;</span>, ]  <span class="co"># show only explicit tracks</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The same can be achieved using the <code>subset()</code>-function</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-handling.html#cb51-1"></a><span class="kw">subset</span>(music_data, top10_track_explicit <span class="op">==</span><span class="st"> &quot;explicit&quot;</span>)  <span class="co"># selects subsets of observations in a data frame</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-handling.html#cb52-1"></a><span class="co"># creates a new data frame that only contains</span></span>
<span id="cb52-2"><a href="data-handling.html#cb52-2"></a><span class="co"># tracks from genre &#39;Dance&#39;</span></span>
<span id="cb52-3"><a href="data-handling.html#cb52-3"></a>music_data_dance &lt;-<span class="st"> </span><span class="kw">subset</span>(music_data, top10_artist_genre <span class="op">==</span><span class="st"> </span></span>
<span id="cb52-4"><a href="data-handling.html#cb52-4"></a><span class="st">    &quot;Dance&quot;</span>)</span>
<span id="cb52-5"><a href="data-handling.html#cb52-5"></a>music_data_dance</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-handling.html#cb53-1"></a><span class="kw">rm</span>(music_data_dance)  <span class="co"># removes an object from the workspace</span></span></code></pre></div>
<p>You may also change the order of the variables in a data frame by using the <code>order()</code>-function</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-handling.html#cb54-1"></a><span class="co"># Orders by genre (ascending) and streams</span></span>
<span id="cb54-2"><a href="data-handling.html#cb54-2"></a><span class="co"># (descending)</span></span>
<span id="cb54-3"><a href="data-handling.html#cb54-3"></a>music_data[<span class="kw">order</span>(top10_artist_genre, <span class="op">-</span>top10_track_streams), </span>
<span id="cb54-4"><a href="data-handling.html#cb54-4"></a>    ]</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE"},{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"94690","2":"French Montana","3":"explicit","4":"Hip-Hop/Rap","5":"2017-07-14","6":"TRUE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="inspecting-the-content-of-a-data-frame" class="section level4">
<h4><span class="header-section-number">3.1.3.2</span> Inspecting the content of a data frame</h4>
<p>The <code>head()</code> function displays the first X elements/rows of a vector, matrix, table, data frame or function.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-handling.html#cb55-1"></a><span class="kw">head</span>(music_data, <span class="dv">3</span>)  <span class="co"># returns the first X rows (here, the first 3 rows)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The <code>tail()</code> function is similar, except it displays the last elements/rows.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-handling.html#cb56-1"></a><span class="kw">tail</span>(music_data, <span class="dv">3</span>)  <span class="co"># returns the last X rows (here, the last 3 rows)</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]}],"data":[{"1":"89011","2":"Calvin Harris","3":"explicit","4":"Dance","5":"2017-06-16","6":"TRUE"},{"1":"87869","2":"Liam Payne","3":"not explicit","4":"Pop","5":"2017-05-18","6":"FALSE"},{"1":"85599","2":"Lauv","3":"not explicit","4":"Pop","5":"2017-05-19","6":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><code>names()</code> returns the names of an R object. When, for example, it is called on a data frame, it returns the names of the columns.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-handling.html#cb57-1"></a><span class="kw">names</span>(music_data)  <span class="co"># returns the names of the variables in the data frame</span></span></code></pre></div>
<pre><code>## [1] &quot;top10_track_streams&quot;       &quot;top10_artist_names&quot;       
## [3] &quot;top10_track_explicit&quot;      &quot;top10_artist_genre&quot;       
## [5] &quot;top_10_track_release_date&quot; &quot;top10_track_explicit_1&quot;</code></pre>
<p><code>str()</code> displays the internal structure of an R object. In the case of a data frame, it returns the class (e.g., numeric, factor, etc.) of each variable, as well as the number of observations and the number of variables.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data-handling.html#cb59-1"></a><span class="kw">str</span>(music_data)  <span class="co"># returns the structure of the data frame</span></span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  6 variables:
##  $ top10_track_streams      : num  163608 126687 120480 110022 108630 ...
##  $ top10_artist_names       : chr  &quot;Axwell /\\ Ingrosso&quot; &quot;Imagine Dragons&quot; &quot;J. Balvin&quot; &quot;Robin Schulz&quot; ...
##  $ top10_track_explicit     : Factor w/ 2 levels &quot;not explicit&quot;,..: 1 1 1 1 1 1 2 2 1 1
##  $ top10_artist_genre       : Factor w/ 5 levels &quot;Alternative&quot;,..: 2 1 4 2 2 2 3 2 5 5
##  $ top_10_track_release_date: Date, format: &quot;2017-05-24&quot; &quot;2017-06-23&quot; ...
##  $ top10_track_explicit_1   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...</code></pre>
<p><code>nrow()</code> and <code>ncol()</code> return the rows and columns of a data frame or matrix, respectively. <code>dim()</code> displays the dimensions of an R object.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="data-handling.html#cb61-1"></a><span class="kw">nrow</span>(music_data)  <span class="co"># returns the number of rows </span></span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-handling.html#cb63-1"></a><span class="kw">ncol</span>(music_data)  <span class="co"># returns the number of columns </span></span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-handling.html#cb65-1"></a><span class="kw">dim</span>(music_data)  <span class="co"># returns the dimensions of a data frame</span></span></code></pre></div>
<pre><code>## [1] 10  6</code></pre>
<p><code>ls()</code> can be used to list all objects that are associated with an R object.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-handling.html#cb67-1"></a><span class="kw">ls</span>(music_data)  <span class="co"># list all objects associated with an object</span></span></code></pre></div>
<pre><code>## [1] &quot;top_10_track_release_date&quot; &quot;top10_artist_genre&quot;       
## [3] &quot;top10_artist_names&quot;        &quot;top10_track_explicit&quot;     
## [5] &quot;top10_track_explicit_1&quot;    &quot;top10_track_streams&quot;</code></pre>
</div>
<div id="append-and-delete-variables-tofrom-data-frames" class="section level4">
<h4><span class="header-section-number">3.1.3.3</span> Append and delete variables to/from data frames</h4>
<p>To call a certain column in a data frame, we may also use the <code>$</code> notation. For example, this returns all values associated with the variable “top10_track_streams”:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-handling.html#cb69-1"></a>music_data<span class="op">$</span>top10_track_streams</span></code></pre></div>
<pre><code>##  [1] 163608 126687 120480 110022 108630  95639  94690  89011  87869  85599</code></pre>
<p>Assume that you wanted to add an additional variable to the data frame. You may use the <code>$</code> notation to achieve this:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="data-handling.html#cb71-1"></a><span class="co"># Create new variable as the log of the number of</span></span>
<span id="cb71-2"><a href="data-handling.html#cb71-2"></a><span class="co"># streams</span></span>
<span id="cb71-3"><a href="data-handling.html#cb71-3"></a>music_data<span class="op">$</span>log_streams &lt;-<span class="st"> </span><span class="kw">log</span>(music_data<span class="op">$</span>top10_track_streams)</span>
<span id="cb71-4"><a href="data-handling.html#cb71-4"></a><span class="co"># Create an ascending count variable which might</span></span>
<span id="cb71-5"><a href="data-handling.html#cb71-5"></a><span class="co"># serve as an ID</span></span>
<span id="cb71-6"><a href="data-handling.html#cb71-6"></a>music_data<span class="op">$</span>obs_number &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(music_data)</span>
<span id="cb71-7"><a href="data-handling.html#cb71-7"></a><span class="kw">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["log_streams"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["obs_number"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"12.00523","8":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"11.74947","8":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"11.69924","8":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"11.60844","8":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"11.59570","8":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"11.46834","8":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>To delete a variable, you can simply create a <code>subset</code> of the full data frame that excludes the variables that you wish to drop:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-handling.html#cb72-1"></a>music_data &lt;-<span class="st"> </span><span class="kw">subset</span>(music_data, <span class="dt">select =</span> <span class="op">-</span><span class="kw">c</span>(log_streams))  <span class="co"># deletes the variable log streams </span></span>
<span id="cb72-2"><a href="data-handling.html#cb72-2"></a><span class="kw">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["top_10_track_release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can also rename variables in a data frame, e.g., using the <code>rename()</code>-function from the <code>plyr</code> package. In the following code “::” signifies that the function “rename” should be taken from the package “plyr”. This can be useful if multiple packages have a function with the same name. Calling a function this way also means that you can access a function without loading the entire package via <code>library()</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-handling.html#cb73-1"></a><span class="kw">library</span>(plyr)</span>
<span id="cb73-2"><a href="data-handling.html#cb73-2"></a>music_data &lt;-<span class="st"> </span>plyr<span class="op">::</span><span class="kw">rename</span>(music_data, <span class="kw">c</span>(<span class="dt">top10_artist_genre =</span> <span class="st">&quot;genre&quot;</span>, </span>
<span id="cb73-3"><a href="data-handling.html#cb73-3"></a>    <span class="dt">top_10_track_release_date =</span> <span class="st">&quot;release_date&quot;</span>))</span>
<span id="cb73-4"><a href="data-handling.html#cb73-4"></a><span class="kw">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Note that the same can be achieved using:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="data-handling.html#cb74-1"></a><span class="kw">names</span>(music_data)[<span class="kw">names</span>(music_data) <span class="op">==</span><span class="st"> &quot;genre&quot;</span>] &lt;-<span class="st"> &quot;top10_artist_genre&quot;</span></span>
<span id="cb74-2"><a href="data-handling.html#cb74-2"></a><span class="kw">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["top10_artist_genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Or by referring to the index of the variable:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="data-handling.html#cb75-1"></a><span class="kw">names</span>(music_data)[<span class="dv">4</span>] &lt;-<span class="st"> &quot;genre&quot;</span></span>
<span id="cb75-2"><a href="data-handling.html#cb75-2"></a><span class="kw">head</span>(music_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["top10_track_streams"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["top10_artist_names"],"name":[2],"type":["chr"],"align":["left"]},{"label":["top10_track_explicit"],"name":[3],"type":["fct"],"align":["left"]},{"label":["genre"],"name":[4],"type":["fct"],"align":["left"]},{"label":["release_date"],"name":[5],"type":["date"],"align":["right"]},{"label":["top10_track_explicit_1"],"name":[6],"type":["lgl"],"align":["right"]},{"label":["obs_number"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"163608","2":"Axwell /\\\\ Ingrosso","3":"not explicit","4":"Dance","5":"2017-05-24","6":"FALSE","7":"1"},{"1":"126687","2":"Imagine Dragons","3":"not explicit","4":"Alternative","5":"2017-06-23","6":"FALSE","7":"2"},{"1":"120480","2":"J. Balvin","3":"not explicit","4":"Latino","5":"2017-07-03","6":"FALSE","7":"3"},{"1":"110022","2":"Robin Schulz","3":"not explicit","4":"Dance","5":"2017-06-30","6":"FALSE","7":"4"},{"1":"108630","2":"Jonas Blue","3":"not explicit","4":"Dance","5":"2017-05-05","6":"FALSE","7":"5"},{"1":"95639","2":"David Guetta","3":"not explicit","4":"Dance","5":"2017-06-09","6":"FALSE","7":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><br><br></p>
<div class="infobox_orange hint">
<p>Note that the data handling approach explained in this chapter uses the so-called ‘base R’ dialect. There are other dialects in R, which are basically different ways of achieving the same thing. Two other popular dialects in R are ‘data.table’ and the ‘tidyverse’ see e.g., <a href="https://wetlandscapes.com/blog/a-comparison-of-r-dialects/">here</a> and <a href="https://atrebas.github.io/post/2019-03-03-datatable-dplyr/">here</a>. Once you become more advanced, you may want to look into the other dialects to achieve certain tasks more efficiently. For now, it is sufficient to be aware that there are other approaches to data handling and each dialect has it’s strengths and weaknesses. We will be mostly using ‘base R’ for the tutorial on this website.</p>
</div>

</div>
</div>
</div>
<div id="data-import-and-export" class="section level2">
<h2><span class="header-section-number">3.2</span> Data import and export</h2>
<div class="infobox download">
<p><a href="./Code/02-data_import.R">You can download the corresponding R-Code here</a></p>
</div>
<br>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/rMArARTb-jo" frameborder="0" allowfullscreen>
</iframe>
</div>
<p><br></p>
<p>Before you can start your analysis in R, you first need to import the data you wish to perform the analysis on. You will often be faced with different types of data formats (usually produced by some other statistical software like SPSS or Excel or a text editor). Fortunately, R is fairly flexible with respect to the sources from which data may be imported and you can import the most common data formats into R with the help of a few packages. R can, among others, handle data from the following sources:</p>
<p><img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/Graphics/data_import.JPG" /></p>
<p>In the previous chapter, we saw how we may use the keyboard to input data in R. In the following sections, we will learn how to import data from text files and other statistical software packages.</p>
<div id="getting-data-for-this-course" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Getting data for this course</h3>
<p>Most of the data sets we will be working with in this course will be stored in text files (i.e., .dat, .txt, .csv). All data sets we will be working with are stored in a repository on GitHub (similar to other cloud storage services such as Dropbox). You can directly import these data sets from GitHub without having to copy data sets from one place to another. If you know the location, where the files are stored, you may conveniently load the data directly from GitHub into R using the <code>read.table()</code> function. The <code>header=TRUE</code> argument indicates that the first line of data represents the header, i.e., it contains the names of the columns. The <code>sep="\t"</code>-argument specifies the delimiter (the character used to separate the columns), which is a TAB in this case.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="data-handling.html#cb76-1"></a>test_data &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;https://raw.githubusercontent.com/IMSMWU/Teaching/master/MRDA2017/test_data.dat&quot;</span>, </span>
<span id="cb76-2"><a href="data-handling.html#cb76-2"></a>    <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</span>
<span id="cb76-3"><a href="data-handling.html#cb76-3"></a><span class="kw">head</span>(test_data)</span></code></pre></div>
<p>Note that it is also possible to download the data from the respective folder on the “Learn@WU” platform, placing it in the working directory and importing it from there. However, this requires an additional step to download the file manually first. If you chose this option, please <strong>remember to put the data file in the working directory first</strong>. If the import is not working, check your working directory setting using <code>getwd()</code>. Once you placed the file in the working directory, you can import it using the same command as above. Note that the file must be given as a character string (i.e., in quotation marks) and has to end with the file extension (e.g., .csv, .tsv, etc.).</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="data-handling.html#cb77-1"></a>test_data &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;test_data.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, </span>
<span id="cb77-2"><a href="data-handling.html#cb77-2"></a>    <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb77-3"><a href="data-handling.html#cb77-3"></a><span class="kw">head</span>(test_data)</span></code></pre></div>
</div>
<div id="import-data-created-by-other-software-packages" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Import data created by other software packages</h3>
<p>Sometimes, you may need to import data files created by other software packages, such as Excel or SPSS. In this section we will use the <code>readxl</code> and <code>haven</code> packages to do this. To import a certain file you should first make sure that the file is stored in your current working directory. You can list all file names in your working directory using the <code>list.files()</code> function. If the file is not there, either copy it to your current working directory, or set your working directory to the folder where the file is located using <code>setwd("/path/to/file")</code>. This tells R the folder you are working in. Remember that you have to use <code>/</code> instead of <code>\</code> to specify the path (if you use Windows paths copied from the explorer they will not work). When your file is in your working directory you can simply enter the filename into the respective import command. The import commands offer various options. For more details enter <code>?read_excel</code>, <code>?read_spss</code> after loading the packages.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-handling.html#cb78-1"></a><span class="co"># import excel files</span></span>
<span id="cb78-2"><a href="data-handling.html#cb78-2"></a><span class="kw">library</span>(readxl)  <span class="co">#load package to import Excel files</span></span>
<span id="cb78-3"><a href="data-handling.html#cb78-3"></a><span class="kw">excel_sheets</span>(<span class="st">&quot;test_data.xlsx&quot;</span>)</span>
<span id="cb78-4"><a href="data-handling.html#cb78-4"></a>survey_data_xlsx &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;test_data.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;mrda_2016_survey&quot;</span>)  <span class="co"># &#39;sheet=x&#39;&#39; specifies which sheet to import</span></span>
<span id="cb78-5"><a href="data-handling.html#cb78-5"></a><span class="kw">head</span>(survey_data_xlsx)</span>
<span id="cb78-6"><a href="data-handling.html#cb78-6"></a></span>
<span id="cb78-7"><a href="data-handling.html#cb78-7"></a><span class="kw">library</span>(haven)  <span class="co">#load package to import SPSS files</span></span>
<span id="cb78-8"><a href="data-handling.html#cb78-8"></a><span class="co"># import SPSS files</span></span>
<span id="cb78-9"><a href="data-handling.html#cb78-9"></a>survey_data_spss &lt;-<span class="st"> </span><span class="kw">read_sav</span>(<span class="st">&quot;test_data.sav&quot;</span>)</span>
<span id="cb78-10"><a href="data-handling.html#cb78-10"></a><span class="kw">head</span>(survey_data_spss)</span></code></pre></div>
<p>The import of other file formats works in a very similar way (e.g., Stata, SAS). Please refer to the respective help-files (e.g., <code>?read_dta</code>, <code>?read_sas</code> …) if you wish to import data created by other software packages.</p>
</div>
<div id="import-data-from-qualtrics" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Import data from Qualtrics</h3>
<p>There is also a dedicated package ‘qualtRics’ which lets you conveniently import data from surveys you conducted via Qualtrics. Simply export your data from Qualtrics as a .csv file (standard option) and you can read it into R as follows:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="data-handling.html#cb79-1"></a><span class="kw">library</span>(qualtRics)</span>
<span id="cb79-2"><a href="data-handling.html#cb79-2"></a>qualtrics &lt;-<span class="st"> </span><span class="kw">read_survey</span>(<span class="st">&quot;qualtrics_survey.csv&quot;</span>)</span>
<span id="cb79-3"><a href="data-handling.html#cb79-3"></a><span class="kw">head</span>(qualtrics)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["StartDate"],"name":[1],"type":["dttm"],"align":["right"]},{"label":["EndDate"],"name":[2],"type":["dttm"],"align":["right"]},{"label":["Status"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["IPAddress"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Progress"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Duration (in seconds)"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Finished"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["RecordedDate"],"name":[8],"type":["dttm"],"align":["right"]},{"label":["ResponseId"],"name":[9],"type":["chr"],"align":["left"]},{"label":["RecipientLastName"],"name":[10],"type":["lgl"],"align":["right"]},{"label":["RecipientFirstName"],"name":[11],"type":["lgl"],"align":["right"]},{"label":["RecipientEmail"],"name":[12],"type":["lgl"],"align":["right"]},{"label":["ExternalReference"],"name":[13],"type":["lgl"],"align":["right"]},{"label":["LocationLatitude"],"name":[14],"type":["dbl"],"align":["right"]},{"label":["LocationLongitude"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["DistributionChannel"],"name":[16],"type":["chr"],"align":["left"]},{"label":["UserLanguage"],"name":[17],"type":["chr"],"align":["left"]},{"label":["Q2"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["Q2_3_TEXT"],"name":[19],"type":["lgl"],"align":["right"]},{"label":["Q3_1"],"name":[20],"type":["dbl"],"align":["right"]},{"label":["Q3_2"],"name":[21],"type":["dbl"],"align":["right"]},{"label":["Q3_3"],"name":[22],"type":["dbl"],"align":["right"]},{"label":["Q3_4"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["Q4_1"],"name":[24],"type":["dbl"],"align":["right"]},{"label":["Q4_2"],"name":[25],"type":["dbl"],"align":["right"]},{"label":["Q4_3"],"name":[26],"type":["dbl"],"align":["right"]},{"label":["Q4_4"],"name":[27],"type":["dbl"],"align":["right"]},{"label":["Q5_1"],"name":[28],"type":["dbl"],"align":["right"]},{"label":["Q13_1"],"name":[29],"type":["dbl"],"align":["right"]},{"label":["Q13_2"],"name":[30],"type":["dbl"],"align":["right"]},{"label":["Q13_3"],"name":[31],"type":["dbl"],"align":["right"]},{"label":["Q13_4"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["Q15"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["Q15_1"],"name":[34],"type":["dbl"],"align":["right"]},{"label":["Q15_2"],"name":[35],"type":["dbl"],"align":["right"]},{"label":["Q15_3"],"name":[36],"type":["dbl"],"align":["right"]},{"label":["Q15_4"],"name":[37],"type":["dbl"],"align":["right"]},{"label":["Q15_5"],"name":[38],"type":["dbl"],"align":["right"]},{"label":["Q15_6"],"name":[39],"type":["dbl"],"align":["right"]},{"label":["Q6"],"name":[40],"type":["dbl"],"align":["right"]},{"label":["Q6_4_TEXT"],"name":[41],"type":["chr"],"align":["left"]},{"label":["Q12_1"],"name":[42],"type":["dbl"],"align":["right"]},{"label":["Q14"],"name":[43],"type":["dbl"],"align":["right"]},{"label":["Q15_7"],"name":[44],"type":["dbl"],"align":["right"]},{"label":["Q16"],"name":[45],"type":["dbl"],"align":["right"]},{"label":["Q8"],"name":[46],"type":["chr"],"align":["left"]}],"data":[{"1":"2020-10-01 10:22:59","2":"2020-10-01 10:25:14","3":"0","4":"137.208.216.243","5":"100","6":"134","7":"1","8":"2020-10-01 10:25:15","9":"R_sN04PjxtCINkx8d","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.19820","15":"16.39169","16":"anonymous","17":"EN","18":"4","19":"NA","20":"3","21":"3","22":"3","23":"3","24":"2","25":"2","26":"2","27":"2","28":"3","29":"2","30":"1","31":"1","32":"4","33":"60","34":"1","35":"3","36":"3","37":"2","38":"1","39":"1","40":"2","41":"NA","42":"4","43":"2","44":"1","45":"1","46":"Please good explanation of the tools! Thank you!"},{"1":"2020-10-01 10:59:08","2":"2020-10-01 11:01:35","3":"0","4":"212.95.5.104","5":"100","6":"147","7":"1","8":"2020-10-01 11:01:36","9":"R_etFjdrEoiuFW9MJ","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.20490","15":"16.36620","16":"anonymous","17":"EN","18":"1","19":"NA","20":"2","21":"1","22":"3","23":"2","24":"4","25":"2","26":"4","27":"2","28":"1","29":"2","30":"2","31":"2","32":"4","33":"30","34":"1","35":"2","36":"1","37":"3","38":"1","39":"1","40":"2","41":"NA","42":"3","43":"2","44":"1","45":"2","46":"NA"},{"1":"2020-10-01 11:51:20","2":"2020-10-01 12:00:23","3":"0","4":"153.206.44.76","5":"100","6":"542","7":"1","8":"2020-10-01 12:00:23","9":"R_12ffeAmb47abiGF","10":"NA","11":"NA","12":"NA","13":"NA","14":"35.67780","15":"139.70819","16":"anonymous","17":"EN","18":"1","19":"NA","20":"3","21":"2","22":"2","23":"2","24":"1","25":"4","26":"3","27":"4","28":"2","29":"1","30":"1","31":"1","32":"5","33":"30","34":"1","35":"1","36":"2","37":"2","38":"1","39":"2","40":"2","41":"NA","42":"5","43":"2","44":"2","45":"2","46":"The most useful marketing research method in reality. More focus on the practice than the theories, for example, how R or Python be used when facing a real project."},{"1":"2020-10-01 12:12:30","2":"2020-10-01 12:16:34","3":"0","4":"212.95.8.240","5":"100","6":"243","7":"1","8":"2020-10-01 12:16:34","9":"R_2tln3oakBkxOXQJ","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.21690","15":"16.49969","16":"anonymous","17":"EN","18":"4","19":"NA","20":"1","21":"2","22":"1","23":"1","24":"2","25":"3","26":"1","27":"1","28":"1","29":"1","30":"3","31":"1","32":"4","33":"40","34":"1","35":"1","36":"1","37":"4","38":"1","39":"1","40":"7","41":"NA","42":"4","43":"2","44":"1","45":"2","46":"I have not had the opportunity to learn a lot about marketing research so far, that’s why a general overview of the most used methods would be nice."},{"1":"2020-10-01 12:14:36","2":"2020-10-01 12:17:33","3":"0","4":"185.69.244.110","5":"100","6":"176","7":"1","8":"2020-10-01 12:17:33","9":"R_2fJOrbsRaKtgMTd","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.20309","15":"16.35271","16":"anonymous","17":"EN","18":"1","19":"NA","20":"2","21":"2","22":"2","23":"2","24":"4","25":"4","26":"4","27":"4","28":"2","29":"3","30":"2","31":"3","32":"4","33":"40","34":"2","35":"1","36":"1","37":"4","38":"1","39":"1","40":"1","41":"NA","42":"5","43":"2","44":"1","45":"1","46":"NA"},{"1":"2020-10-01 12:25:44","2":"2020-10-01 12:29:12","3":"0","4":"185.69.244.212","5":"100","6":"207","7":"1","8":"2020-10-01 12:29:12","9":"R_2bK4w2y7ZbiJ8Tc","10":"NA","11":"NA","12":"NA","13":"NA","14":"48.20309","15":"16.35271","16":"anonymous","17":"EN","18":"1","19":"NA","20":"2","21":"2","22":"2","23":"1","24":"4","25":"4","26":"4","27":"2","28":"2","29":"4","30":"2","31":"2","32":"2","33":"50","34":"2","35":"2","36":"1","37":"3","38":"1","39":"1","40":"2","41":"NA","42":"4","43":"2","44":"1","45":"1","46":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>When you inspect the data frame in R after you imported the data, you will find that it has some additional information compared to a standard .csv file. For example, each question (column) has the question number that you assigned in Qualtrics but also the Question text as an additional label.</p>
</div>
<div id="export-data" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Export data</h3>
<p>Exporting to different formats is also easy, as you can just replace “read” with “write” in many of the previously discussed functions (e.g. <code>write.table(object, "file_name")</code>). This will save the data file to the working directory. To check what the current working directory is you can use <code>getwd()</code>. By default, the <code>write.table(object, "file_name")</code>function includes the row number as the first variable. By specifying <code>row.names = FALSE</code>, you may exclude this variable since it doesn’t contain any useful information.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="data-handling.html#cb80-1"></a><span class="kw">write.table</span>(music_data, <span class="st">&quot;musicData.dat&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>, </span>
<span id="cb80-2"><a href="data-handling.html#cb80-2"></a>    <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)  <span class="co">#writes to a tab-delimited text file</span></span>
<span id="cb80-3"><a href="data-handling.html#cb80-3"></a><span class="kw">write.table</span>(music_data, <span class="st">&quot;musicData.csv&quot;</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>, </span>
<span id="cb80-4"><a href="data-handling.html#cb80-4"></a>    <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>)  <span class="co">#writes to a comma-separated value file </span></span>
<span id="cb80-5"><a href="data-handling.html#cb80-5"></a><span class="kw">write_sav</span>(music_data, <span class="st">&quot;my_file.sav&quot;</span>)</span></code></pre></div>
</div>
<div id="import-data-from-the-web" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Import data from the Web</h3>
<div id="scraping-data-from-websites" class="section level4">
<h4><span class="header-section-number">3.2.5.1</span> Scraping data from websites</h4>
<p>Sometimes you may come across interesting data on websites that you would like to analyze. Reading data from websites is possible in R, e.g., using the <code>rvest</code> package. Let’s assume you would like to read a table that lists the population of different countries from <a href="https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population" target="_blank">this Wikipedia page</a>. It helps to first inspect the structure of the website (e.g., using tools like <a href="http://selectorgadget.com/" target="_blank">SelectorGadget</a>), so you know which elements you would like to extract. In this case it is fairly obvious that the data are stored in a table for which the associated html-tag is <code>&lt;table&gt;</code>. So let’s read the entire website using <code>read_html(url)</code> and filter all tables using <code>read_html(html_nodes(...,"table"))</code>.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="data-handling.html#cb81-1"></a><span class="kw">library</span>(rvest)</span>
<span id="cb81-2"><a href="data-handling.html#cb81-2"></a>url &lt;-<span class="st"> &quot;https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population&quot;</span></span>
<span id="cb81-3"><a href="data-handling.html#cb81-3"></a>population &lt;-<span class="st"> </span><span class="kw">read_html</span>(url)</span>
<span id="cb81-4"><a href="data-handling.html#cb81-4"></a>population &lt;-<span class="st"> </span><span class="kw">html_nodes</span>(population, <span class="st">&quot;table.wikitable&quot;</span>)</span>
<span id="cb81-5"><a href="data-handling.html#cb81-5"></a><span class="kw">print</span>(population)</span></code></pre></div>
<pre><code>## {xml_nodeset (1)}
## [1] &lt;table class=&quot;wikitable sortable&quot;&gt;&lt;tbody&gt;\n&lt;tr&gt;\n&lt;th&gt;Rank&lt;/th&gt;\n&lt;th&gt;&lt;a hr ...</code></pre>
<p>The output shows that there are two tables on the website and the first one appears to contain the relevant information. So let’s read the first table using the <code>html_table()</code> function. Note that <code>population</code> is of class “list”. A list is a vector that has other R objects (e.g., other vectors, data frames, matrices, etc.) as its elements. If we want to access the data of one of the elements, we have to use two square brackets on each side instead of just one (e.g., <code>population[[1]]</code> gets us the first table from the list of tables on the website; the argument <code>fill = TRUE</code> ensures that empty cells are replaced with missing values when reading the table).</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="data-handling.html#cb83-1"></a>population &lt;-<span class="st"> </span>population[[<span class="dv">1</span>]] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_table</span>(<span class="dt">fill =</span> <span class="ot">TRUE</span>)</span>
<span id="cb83-2"><a href="data-handling.html#cb83-2"></a><span class="kw">head</span>(population)  <span class="co">#checks if we scraped the desired data</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Rank"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Country or dependent territory"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[4],"type":["chr"],"align":["left"]},{"label":["% of world"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Date"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Source (official or from the United Nations)"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Notes"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"–","2":"","3":"World","4":"7,899,451,000","5":"100%","6":"2 Oct 2021","7":"UN projection[2]","8":""},{"1":"1","2":"China","3":"Asia","4":"1,411,778,724","5":"17.9%","6":"1 Nov 2020","7":"2020 census result[3]","8":"The census figure refers to mainland China, excluding its special administrative regions of Hong Kong and Macau, the former of which returned to Chinese sovereignty on 1 July 1997 and the latter on 20 December 1999."},{"1":"2","2":"India","3":"Asia","4":"1,382,598,940","5":"17.5%","6":"2 Oct 2021","7":"National population clock[4]","8":"The figure includes the population of India-administered Kashmir but not of China- or Pakistan-administered Kashmir."},{"1":"3","2":"United States","3":"Americas","4":"332,463,584","5":"4.21%","6":"2 Oct 2021","7":"National population clock[5]","8":"Includes the 50 states and the District of Columbia, but excludes the U.S. territories."},{"1":"4","2":"Indonesia","3":"Asia","4":"271,350,000","5":"3.44%","6":"31 Dec 2020","7":"National annual estimate[6]","8":""},{"1":"5","2":"Pakistan","3":"Asia","4":"225,200,000","5":"2.85%","6":"1 Jul 2021","7":"UN projection[2]","8":"The figure includes the population of Pakistan-administered Kashmir but not of China- or India-administered Kashmir."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>You can see that population is read as a character variable because of the commas.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="data-handling.html#cb84-1"></a><span class="kw">class</span>(population<span class="op">$</span>Population)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>If we wanted to use this variable for some kind of analysis, we would first need to convert it to numeric format using the <code>as.numeric()</code> function. However, before we can do this, we can use the <code>str_replace_all()</code> function from the stringr package, which replaces all matches of a string. In our case, we would like to replace the commas (<code>","</code>) with nothing (<code>""</code>).</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-handling.html#cb86-1"></a><span class="kw">library</span>(stringr)</span>
<span id="cb86-2"><a href="data-handling.html#cb86-2"></a>population<span class="op">$</span>Population &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">str_replace_all</span>(population<span class="op">$</span>Population, </span>
<span id="cb86-3"><a href="data-handling.html#cb86-3"></a>    <span class="dt">pattern =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">replacement =</span> <span class="st">&quot;&quot;</span>))  <span class="co">#convert to numeric</span></span>
<span id="cb86-4"><a href="data-handling.html#cb86-4"></a><span class="kw">head</span>(population)  <span class="co">#checks if we scraped the desired data</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Rank"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Country or dependent territory"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Region"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["% of world"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Date"],"name":[6],"type":["chr"],"align":["left"]},{"label":["Source (official or from the United Nations)"],"name":[7],"type":["chr"],"align":["left"]},{"label":["Notes"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"–","2":"","3":"World","4":"7899451000","5":"100%","6":"2 Oct 2021","7":"UN projection[2]","8":""},{"1":"1","2":"China","3":"Asia","4":"1411778724","5":"17.9%","6":"1 Nov 2020","7":"2020 census result[3]","8":"The census figure refers to mainland China, excluding its special administrative regions of Hong Kong and Macau, the former of which returned to Chinese sovereignty on 1 July 1997 and the latter on 20 December 1999."},{"1":"2","2":"India","3":"Asia","4":"1382598940","5":"17.5%","6":"2 Oct 2021","7":"National population clock[4]","8":"The figure includes the population of India-administered Kashmir but not of China- or Pakistan-administered Kashmir."},{"1":"3","2":"United States","3":"Americas","4":"332463584","5":"4.21%","6":"2 Oct 2021","7":"National population clock[5]","8":"Includes the 50 states and the District of Columbia, but excludes the U.S. territories."},{"1":"4","2":"Indonesia","3":"Asia","4":"271350000","5":"3.44%","6":"31 Dec 2020","7":"National annual estimate[6]","8":""},{"1":"5","2":"Pakistan","3":"Asia","4":"225200000","5":"2.85%","6":"1 Jul 2021","7":"UN projection[2]","8":"The figure includes the population of Pakistan-administered Kashmir but not of China- or India-administered Kashmir."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now the variable is of type “numeric” and could be used for analysis.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="data-handling.html#cb87-1"></a><span class="kw">class</span>(population<span class="op">$</span>Population)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
</div>
<div id="scraping-data-from-apis" class="section level4">
<h4><span class="header-section-number">3.2.5.2</span> Scraping data from APIs</h4>
<div id="scraping-data-from-apis-directly" class="section level5">
<h5><span class="header-section-number">3.2.5.2.1</span> Scraping data from APIs directly</h5>
<p>Reading data from websites can be tricky since you need to analyze the page structure first. Many web-services (e.g., Facebook, Twitter, YouTube) actually have application programming interfaces (API’s), which you can use to obtain data in a pre-structured format. JSON (JavaScript Object Notation) is a popular lightweight data-interchange format in which data can be obtained. The process of obtaining data is visualized in the following graphic:</p>
<div class="figure">
<img src="https://github.com/IMSMWU/Teaching/raw/master/MRDA2017/API.JPG" alt="" />
<p class="caption">Obtaining data from APIs</p>
</div>
<p>The process of obtaining data from APIs consists of the following steps:</p>
<ul>
<li>Identify an API that has enough data to be relevant and reliable (e.g., <a href="http://www.programmableweb.com:" target="_blank">www.programmableweb.com</a> has &gt;12,000 open web APIs in 63 categories).</li>
<li>Request information by calling (or, more technically speaking, creating a request to) the API (e.g., R, python, php or JavaScript).</li>
<li>Receive response messages, which is usually in JavaScript Object Notation (JSON) or Extensible Markup Language (XML) format.</li>
<li>Write a parser to pull out the elements you want and put them into a of simpler format</li>
<li>Store, process or analyze data according the marketing research question.</li>
</ul>
<p>Let’s assume that you would like to obtain population data again. The World Bank has an API that allows you to easily obtain this kind of data. The details are usually provided in the API reference, e.g., <a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889392-api-documentation" target="_blank">here</a>. You simply “call” the API for the desired information and get a structured JSON file with the desired key-value pairs in return. For example, the population for Austria from 1960 to 2019 can be obtained using <a href="http://api.worldbank.org/v2/countries/AT/indicators/SP.POP.TOTL/?date=1960:2019&format=json&per_page=100" target="_blank">this call</a>. The file can be easily read into R using the <code>fromJSON()</code>-function from the <code>jsonlite</code>-package. Again, the result is a list and the second element <code>ctrydata[[2]]</code> contains the desired data, from which we select the “value” and “data” columns using the square brackets as usual <code>[,c("value","date")]</code></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-handling.html#cb89-1"></a><span class="kw">library</span>(jsonlite)</span>
<span id="cb89-2"><a href="data-handling.html#cb89-2"></a>url &lt;-<span class="st"> &quot;http://api.worldbank.org/v2/countries/AT/indicators/SP.POP.TOTL/?date=1960:2019&amp;format=json&amp;per_page=100&quot;</span>  <span class="co">#specifies url</span></span>
<span id="cb89-3"><a href="data-handling.html#cb89-3"></a>ctrydata &lt;-<span class="st"> </span><span class="kw">fromJSON</span>(url)  <span class="co">#parses the data </span></span>
<span id="cb89-4"><a href="data-handling.html#cb89-4"></a><span class="kw">str</span>(ctrydata)</span></code></pre></div>
<pre><code>## List of 2
##  $ :List of 7
##   ..$ page       : int 1
##   ..$ pages      : int 1
##   ..$ per_page   : int 100
##   ..$ total      : int 60
##   ..$ sourceid   : chr &quot;2&quot;
##   ..$ sourcename : chr &quot;World Development Indicators&quot;
##   ..$ lastupdated: chr &quot;2021-09-15&quot;
##  $ :&#39;data.frame&#39;:    60 obs. of  8 variables:
##   ..$ indicator      :&#39;data.frame&#39;:  60 obs. of  2 variables:
##   .. ..$ id   : chr [1:60] &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; &quot;SP.POP.TOTL&quot; ...
##   .. ..$ value: chr [1:60] &quot;Population, total&quot; &quot;Population, total&quot; &quot;Population, total&quot; &quot;Population, total&quot; ...
##   ..$ country        :&#39;data.frame&#39;:  60 obs. of  2 variables:
##   .. ..$ id   : chr [1:60] &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; ...
##   .. ..$ value: chr [1:60] &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; &quot;Austria&quot; ...
##   ..$ countryiso3code: chr [1:60] &quot;AUT&quot; &quot;AUT&quot; &quot;AUT&quot; &quot;AUT&quot; ...
##   ..$ date           : chr [1:60] &quot;2019&quot; &quot;2018&quot; &quot;2017&quot; &quot;2016&quot; ...
##   ..$ value          : int [1:60] 8879920 8840521 8797566 8736668 8642699 8546356 8479823 8429991 8391643 8363404 ...
##   ..$ unit           : chr [1:60] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##   ..$ obs_status     : chr [1:60] &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ...
##   ..$ decimal        : int [1:60] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data-handling.html#cb91-1"></a><span class="kw">head</span>(ctrydata[[<span class="dv">2</span>]][, <span class="kw">c</span>(<span class="st">&quot;value&quot;</span>, <span class="st">&quot;date&quot;</span>)])  <span class="co">#checks if we scraped the desired data</span></span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["value"],"name":[1],"type":["int"],"align":["right"]},{"label":["date"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"8879920","2":"2019"},{"1":"8840521","2":"2018"},{"1":"8797566","2":"2017"},{"1":"8736668","2":"2016"},{"1":"8642699","2":"2015"},{"1":"8546356","2":"2014"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="scraping-data-from-apis-via-r-packages" class="section level5">
<h5><span class="header-section-number">3.2.5.2.2</span> Scraping data from APIs via R packages</h5>
<p>An even more convenient way to obtain data from web APIs is to use existing R packages that someone else has already created. There are R packages available for various web-services. For example, the <code>gtrendsR</code> package can be used to conveniently obtain data from the <a href="https://trends.google.at/trends/" target="_blank">Google Trends</a> page. The <code>gtrends()</code> function is easy to use and returns a list of elements (e.g., “interest over time”, “interest by city”, “related topics”), which can be inspected using the <code>ls()</code> function. The following example can be used to obtain data for the search term “data science” in the US between September 1 and October 6:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-handling.html#cb92-1"></a><span class="kw">library</span>(gtrendsR)</span>
<span id="cb92-2"><a href="data-handling.html#cb92-2"></a><span class="co"># specify search term, area, source and time frame</span></span>
<span id="cb92-3"><a href="data-handling.html#cb92-3"></a>google_trends &lt;-<span class="st"> </span><span class="kw">gtrends</span>(<span class="st">&quot;data science&quot;</span>, <span class="dt">geo =</span> <span class="kw">c</span>(<span class="st">&quot;US&quot;</span>), </span>
<span id="cb92-4"><a href="data-handling.html#cb92-4"></a>    <span class="dt">gprop =</span> <span class="kw">c</span>(<span class="st">&quot;web&quot;</span>), <span class="dt">time =</span> <span class="st">&quot;2012-09-01 2020-10-06&quot;</span>)</span>
<span id="cb92-5"><a href="data-handling.html#cb92-5"></a><span class="co"># inspect trend over time data frame</span></span>
<span id="cb92-6"><a href="data-handling.html#cb92-6"></a><span class="kw">head</span>(google_trends<span class="op">$</span>interest_over_time)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["dttm"],"align":["right"]},{"label":["hits"],"name":[2],"type":["int"],"align":["right"]},{"label":["keyword"],"name":[3],"type":["chr"],"align":["left"]},{"label":["geo"],"name":[4],"type":["chr"],"align":["left"]},{"label":["time"],"name":[5],"type":["chr"],"align":["left"]},{"label":["gprop"],"name":[6],"type":["chr"],"align":["left"]},{"label":["category"],"name":[7],"type":["int"],"align":["right"]}],"data":[{"1":"2012-09-01","2":"17","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2012-10-01","2":"12","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2012-11-01","2":"12","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2012-12-01","2":"12","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2013-01-01","2":"14","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"},{"1":"2013-02-01","2":"13","3":"data science","4":"US","5":"2012-09-01 2020-10-06","6":"web","7":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Although we haven’t covered data visualization yet (see chapter 5), you could also easily plot the data to see the increasing trend for the search term we selected using the <code>plot()</code>-function. Note that the argument <code>type = "b"</code> indicates that <u>b</u>oth - a combination of line and points - should be used.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-handling.html#cb93-1"></a><span class="co"># plot data</span></span>
<span id="cb93-2"><a href="data-handling.html#cb93-2"></a><span class="kw">plot</span>(google_trends<span class="op">$</span>interest_over_time[, <span class="kw">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;hits&quot;</span>)], </span>
<span id="cb93-3"><a href="data-handling.html#cb93-3"></a>    <span class="dt">type =</span> <span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<p>Another advantage of R is that it is open to user contributions. This often means that packages that allow users to collect data to investigate timely issues are available fairly quickly. As an example, consider the recent pandemic where many resources were made available via R packages to researchers (see <a href="https://mine-cetinkaya-rundel.github.io/covid19-r/">here</a> for an overview). For example, we might want to get information on the number of daily confirmed cases in the US on the state level. We could obtain this information in just one line of code using the ‘COVID19’ package.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-handling.html#cb94-1"></a><span class="kw">library</span>(COVID19)</span>
<span id="cb94-2"><a href="data-handling.html#cb94-2"></a>covid_data &lt;-<span class="st"> </span><span class="kw">covid19</span>(<span class="dt">country =</span> <span class="st">&quot;US&quot;</span>, <span class="dt">level =</span> <span class="dv">2</span>, <span class="dt">start =</span> <span class="st">&quot;2020-01-01&quot;</span>)</span></code></pre></div>
<pre><code>## We have invested a lot of time and effort in creating COVID-19 Data Hub, please cite the following when using it:
## 
##   Guidotti, E., Ardia, D., (2020), &quot;COVID-19 Data Hub&quot;, Journal of Open
##   Source Software 5(51):2376, doi: 10.21105/joss.02376.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Article{,
##     title = {COVID-19 Data Hub},
##     year = {2020},
##     doi = {10.21105/joss.02376},
##     author = {Emanuele Guidotti and David Ardia},
##     journal = {Journal of Open Source Software},
##     volume = {5},
##     number = {51},
##     pages = {2376},
##   }
## 
## To retrieve citation and metadata of the data sources see ?covid19cite. To hide this message use &#39;verbose = FALSE&#39;.</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="data-handling.html#cb96-1"></a><span class="kw">head</span>(covid_data)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["date"],"align":["right"]},{"label":["vaccines"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["tests"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["confirmed"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["recovered"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["deaths"],"name":[7],"type":["int"],"align":["right"]},{"label":["hosp"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["vent"],"name":[9],"type":["int"],"align":["right"]},{"label":["icu"],"name":[10],"type":["int"],"align":["right"]},{"label":["population"],"name":[11],"type":["dbl"],"align":["right"]},{"label":["school_closing"],"name":[12],"type":["int"],"align":["right"]},{"label":["workplace_closing"],"name":[13],"type":["int"],"align":["right"]},{"label":["cancel_events"],"name":[14],"type":["int"],"align":["right"]},{"label":["gatherings_restrictions"],"name":[15],"type":["int"],"align":["right"]},{"label":["transport_closing"],"name":[16],"type":["int"],"align":["right"]},{"label":["stay_home_restrictions"],"name":[17],"type":["int"],"align":["right"]},{"label":["internal_movement_restrictions"],"name":[18],"type":["int"],"align":["right"]},{"label":["international_movement_restrictions"],"name":[19],"type":["int"],"align":["right"]},{"label":["information_campaigns"],"name":[20],"type":["int"],"align":["right"]},{"label":["testing_policy"],"name":[21],"type":["int"],"align":["right"]},{"label":["contact_tracing"],"name":[22],"type":["int"],"align":["right"]},{"label":["stringency_index"],"name":[23],"type":["dbl"],"align":["right"]},{"label":["iso_alpha_3"],"name":[24],"type":["chr"],"align":["left"]},{"label":["iso_alpha_2"],"name":[25],"type":["chr"],"align":["left"]},{"label":["iso_numeric"],"name":[26],"type":["int"],"align":["right"]},{"label":["currency"],"name":[27],"type":["chr"],"align":["left"]},{"label":["administrative_area_level"],"name":[28],"type":["int"],"align":["right"]},{"label":["administrative_area_level_1"],"name":[29],"type":["chr"],"align":["left"]},{"label":["administrative_area_level_2"],"name":[30],"type":["chr"],"align":["left"]},{"label":["administrative_area_level_3"],"name":[31],"type":["lgl"],"align":["right"]},{"label":["latitude"],"name":[32],"type":["dbl"],"align":["right"]},{"label":["longitude"],"name":[33],"type":["dbl"],"align":["right"]},{"label":["key"],"name":[34],"type":["chr"],"align":["left"]},{"label":["key_alpha_2"],"name":[35],"type":["chr"],"align":["left"]},{"label":["key_numeric"],"name":[36],"type":["int"],"align":["right"]},{"label":["key_google_mobility"],"name":[37],"type":["chr"],"align":["left"]},{"label":["key_apple_mobility"],"name":[38],"type":["chr"],"align":["left"]},{"label":["key_jhu_csse"],"name":[39],"type":["chr"],"align":["left"]}],"data":[{"1":"121cd66e","2":"2020-01-01","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"5639632","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"USA","25":"US","26":"840","27":"USN","28":"2","29":"United States","30":"Minnesota","31":"NA","32":"44.52837","33":"-92.30891","34":"NA","35":"MN","36":"27","37":"Minnesota","38":"Minnesota","39":"US27"},{"1":"121cd66e","2":"2020-01-02","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"5639632","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"USA","25":"US","26":"840","27":"USN","28":"2","29":"United States","30":"Minnesota","31":"NA","32":"44.52837","33":"-92.30891","34":"NA","35":"MN","36":"27","37":"Minnesota","38":"Minnesota","39":"US27"},{"1":"121cd66e","2":"2020-01-03","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"5639632","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"USA","25":"US","26":"840","27":"USN","28":"2","29":"United States","30":"Minnesota","31":"NA","32":"44.52837","33":"-92.30891","34":"NA","35":"MN","36":"27","37":"Minnesota","38":"Minnesota","39":"US27"},{"1":"121cd66e","2":"2020-01-04","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"5639632","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"USA","25":"US","26":"840","27":"USN","28":"2","29":"United States","30":"Minnesota","31":"NA","32":"44.52837","33":"-92.30891","34":"NA","35":"MN","36":"27","37":"Minnesota","38":"Minnesota","39":"US27"},{"1":"121cd66e","2":"2020-01-05","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"5639632","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"USA","25":"US","26":"840","27":"USN","28":"2","29":"United States","30":"Minnesota","31":"NA","32":"44.52837","33":"-92.30891","34":"NA","35":"MN","36":"27","37":"Minnesota","38":"Minnesota","39":"US27"},{"1":"121cd66e","2":"2020-01-06","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA","10":"NA","11":"5639632","12":"0","13":"0","14":"0","15":"0","16":"0","17":"0","18":"0","19":"0","20":"0","21":"0","22":"0","23":"0","24":"USA","25":"US","26":"840","27":"USN","28":"2","29":"United States","30":"Minnesota","31":"NA","32":"44.52837","33":"-92.30891","34":"NA","35":"MN","36":"27","37":"Minnesota","38":"Minnesota","39":"US27"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Again, we could plot this data easily. In the following example, we first subset the data to the state of New York and then plot the development over time using the <code>plot()</code>-function. The argument <code>type = "l"</code> indicates that a <u>l</u>ine plot should be produced.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-handling.html#cb97-1"></a><span class="co"># plot data</span></span>
<span id="cb97-2"><a href="data-handling.html#cb97-2"></a><span class="kw">plot</span>(covid_data[covid_data<span class="op">$</span>administrative_area_level_<span class="dv">2</span> <span class="op">==</span><span class="st"> </span></span>
<span id="cb97-3"><a href="data-handling.html#cb97-3"></a><span class="st">    &quot;New York&quot;</span>, <span class="kw">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;confirmed&quot;</span>)], <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
</div>
</div>
</div>
</div>
<div id="learning-check-1" class="section level2 unnumbered">
<h2>Learning check</h2>
<p><strong>(LC3.1) Which of the following are data types are recognized by R?</strong></p>
<ul>
<li><input type="checkbox" disabled="" checked="" />
Factor</li>
<li><input type="checkbox" disabled="" checked="" />
Date</li>
<li><input type="checkbox" disabled="" />
Decimal</li>
<li><input type="checkbox" disabled="" />
Vector</li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.2) What function should you use to check if an object is a data frame?</strong></p>
<ul>
<li><input type="checkbox" disabled="" />
<code>type()</code></li>
<li><input type="checkbox" disabled="" />
<code>str()</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>class()</code></li>
<li><input type="checkbox" disabled="" />
<code>object.type()</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.3) You would like to combine three vectors (student, grade, date) in a data frame. What would happen when executing the following code?</strong></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-handling.html#cb98-1"></a>student &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Max&quot;</span>, <span class="st">&quot;Jonas&quot;</span>, <span class="st">&quot;Saskia&quot;</span>, <span class="st">&quot;Victoria&quot;</span>)</span>
<span id="cb98-2"><a href="data-handling.html#cb98-2"></a>grade &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb98-3"><a href="data-handling.html#cb98-3"></a>date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">c</span>(<span class="st">&quot;2020-10-06&quot;</span>, <span class="st">&quot;2020-10-08&quot;</span>, <span class="st">&quot;2020-10-09&quot;</span>))</span>
<span id="cb98-4"><a href="data-handling.html#cb98-4"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(student, grade, date)</span></code></pre></div>
<ul>
<li><input type="checkbox" disabled="" />
Error because a data frame can not have different data types</li>
<li><input type="checkbox" disabled="" />
Error because you should use <code>as.data.frame()</code> instead of <code>data.frame()</code></li>
<li><input type="checkbox" disabled="" checked="" />
Error because all vectors need to have the same length</li>
<li><input type="checkbox" disabled="" />
Error because the column names are not specified</li>
<li><input type="checkbox" disabled="" />
This code should not report an error</li>
</ul>
<p><strong>You would like to analyze the following data frame</strong></p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["student"],"name":[1],"type":["chr"],"align":["left"]},{"label":["grade"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["country"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"Christian","2":"1","3":"AT"},{"1":"Matthias","2":"1","3":"AT"},{"1":"Max","2":"NA","3":"AT"},{"1":"Christina","2":"3","3":"AT"},{"1":"Ines","2":"2","3":"DE"},{"1":"Eddie","2":"1","3":"DE"},{"1":"Janine","2":"2","3":"DE"},{"1":"Victoria","2":"3","3":"SK"},{"1":"Pia","2":"1","3":"US"},{"1":"Julia","2":"2","3":"CA"},{"1":"Lena","2":"3","3":"AT"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p><strong>(LC3.4) How can you obtain Christina’s grade from the data frame?</strong></p>
<ul>
<li><input type="checkbox" disabled="" checked="" />
<code>df[4,2]</code></li>
<li><input type="checkbox" disabled="" />
<code>df[2,4]</code></li>
<li><input type="checkbox" disabled="" />
<code>df[student="Christina","grade"]</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>df[student=="Christina","grade"]</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.5) How can you add a new variable ‘student_id’ to the data frame that assigns numbers to students in an ascending order?</strong></p>
<ul>
<li><input type="checkbox" disabled="" checked="" />
<code>df$student_id &lt;- 1:nrow(df)</code></li>
<li><input type="checkbox" disabled="" />
<code>df&amp;student_id &lt;- 1:nrow(df)</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>df[,"student_id"] &lt;- 1:nrow(df)</code></li>
<li><input type="checkbox" disabled="" />
<code>df$student_id &lt;- 1:length(df)</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.6) How could you obtain all rows with students who obtained a 1?</strong></p>
<ul>
<li><input type="checkbox" disabled="" checked="" />
<code>df[df$grade==1,]</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>df[grade == min(df$grade),]</code></li>
<li><input type="checkbox" disabled="" />
<code>df[,df$grade==1]</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>df[grade==1,]</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.7) How could you create a subset of observations where the grade is not missing (NA) </strong></p>
<ul>
<li><input type="checkbox" disabled="" />
<code>df_subset &lt;- df[grade!=NA,]</code></li>
<li><input type="checkbox" disabled="" />
<code>df_subset &lt;- df[isnot.na(grade),]</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>df_subset &lt;- df[!is.na(grade),]</code></li>
<li><input type="checkbox" disabled="" />
<code>df_subset &lt;- df[,grade!=NA]</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.8) What is the share of students with a grade better than 3?</strong></p>
<ul>
<li><input type="checkbox" disabled="" />
<code>df[grade&lt;3,]/nrow(df)</code></li>
<li><input type="checkbox" disabled="" />
<code>nrow(df[grade&lt;3,])/length(df)</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>nrow(df[grade&lt;3,])/nrow(df)</code></li>
<li><input type="checkbox" disabled="" />
<code>nrow(df[,grade&lt;3])/nrow(df)</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.9) You would like to load a .csv file from your working directory. What function would you use do it?</strong></p>
<ul>
<li><input type="checkbox" disabled="" checked="" />
<code>read.table(file_name.csv)</code></li>
<li><input type="checkbox" disabled="" />
<code>load.csv("file.csv")</code></li>
<li><input type="checkbox" disabled="" />
<code>read.table("file.csv")</code></li>
<li><input type="checkbox" disabled="" />
<code>get.table(file_name.csv)</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>
<p><strong>(LC3.10) After you loaded the file, you would like to inspect the types of data contained in it. How would you do it?</strong></p>
<ul>
<li><input type="checkbox" disabled="" />
<code>ncol(df)</code></li>
<li><input type="checkbox" disabled="" />
<code>nrow(df)</code></li>
<li><input type="checkbox" disabled="" />
<code>dim(df)</code></li>
<li><input type="checkbox" disabled="" checked="" />
<code>str(df)</code></li>
<li><input type="checkbox" disabled="" />
None of the above</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summarizing-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
